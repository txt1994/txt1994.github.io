

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.jpg">
  <link rel="icon" href="/img/logo.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#6aa84f">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="åˆ†ç±» åˆ›å»ºå‹æ¨¡å¼        æ¨èçœ‹ğŸ‘‰å¸¸ç”¨è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ (refactoringguru.cn) è®¾è®¡æ¨¡å¼æè¿°ï¼š ç”¨ç‰¹å®šçš„å¥—è·¯è§£å†³ç°å®é—®é¢˜ï¼Œæ¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼å¯¹åº”ä¸€ä¸ªæ³•å­ åˆ†ç±»#æ ¹æ®æ„å›¾æˆ–ç›®çš„åˆ†ç±»  åˆ›å»ºå‹æ¨¡å¼: æä¾›åˆ›å»ºå¯¹è±¡æœºåˆ¶ï¼Œå¢åŠ å·²æœ‰çš„ä»£ç çµæ´»æ€§å’Œå¯å¤ç”¨æ€§ ç»“æ„å‹æ¨¡å¼: ä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œ å¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆã€‚ è¡Œä¸ºæ¨¡å¼: è´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£å§”">
<meta property="og:type" content="article">
<meta property="og:title" content="C++è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼">
<meta property="og:url" content="https://txt1994.github.io/2021/12/27/C-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="åˆ†ç±» åˆ›å»ºå‹æ¨¡å¼        æ¨èçœ‹ğŸ‘‰å¸¸ç”¨è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ (refactoringguru.cn) è®¾è®¡æ¨¡å¼æè¿°ï¼š ç”¨ç‰¹å®šçš„å¥—è·¯è§£å†³ç°å®é—®é¢˜ï¼Œæ¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼å¯¹åº”ä¸€ä¸ªæ³•å­ åˆ†ç±»#æ ¹æ®æ„å›¾æˆ–ç›®çš„åˆ†ç±»  åˆ›å»ºå‹æ¨¡å¼: æä¾›åˆ›å»ºå¯¹è±¡æœºåˆ¶ï¼Œå¢åŠ å·²æœ‰çš„ä»£ç çµæ´»æ€§å’Œå¯å¤ç”¨æ€§ ç»“æ„å‹æ¨¡å¼: ä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œ å¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆã€‚ è¡Œä¸ºæ¨¡å¼: è´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£å§”">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://txt1994.github.io/img/R-C.png">
<meta property="article:published_time" content="2021-12-27T05:48:06.000Z">
<meta property="article:modified_time" content="2022-03-18T16:02:11.826Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="è®¾è®¡æ¨¡å¼">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://txt1994.github.io/img/R-C.png">
  
  
  <title>C++è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼ - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->

  
<link rel="stylesheet" href="/css/style.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"txt1994.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>txt1994s</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹è”
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="C++è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-12-27 13:48" pubdate>
        2021å¹´12æœˆ27æ—¥ ä¸‹åˆ
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      8k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      67 åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">C++è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2022å¹´3æœˆ19æ—¥ å‡Œæ™¨
                
              </p>
            
            <div class="markdown-body">
              <div class="toc">

<!-- toc -->

<ul>
<li><a href="#fen-lei">åˆ†ç±»</a><ul>
<li><a href="#chuang-jian-xing-mo-shi">åˆ›å»ºå‹æ¨¡å¼</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<p>æ¨èçœ‹ğŸ‘‰<a target="_blank" rel="noopener" href="https://refactoringguru.cn/design-patterns">å¸¸ç”¨è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ (refactoringguru.cn)</a></p>
<p>è®¾è®¡æ¨¡å¼æè¿°ï¼š</p>
<p>ç”¨ç‰¹å®šçš„<code>å¥—è·¯</code>è§£å†³ç°å®é—®é¢˜ï¼Œæ¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼å¯¹åº”ä¸€ä¸ªæ³•å­</p>
<h2><span id="fen-lei">åˆ†ç±»</span><a href="#fen-lei" class="header-anchor">#</a></h2><p>æ ¹æ®æ„å›¾æˆ–ç›®çš„åˆ†ç±»</p>
<ul>
<li><strong>åˆ›å»ºå‹æ¨¡å¼</strong>: æä¾›åˆ›å»ºå¯¹è±¡æœºåˆ¶ï¼Œå¢åŠ å·²æœ‰çš„ä»£ç çµæ´»æ€§å’Œå¯å¤ç”¨æ€§</li>
<li><strong>ç»“æ„å‹æ¨¡å¼</strong>: ä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œ å¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆã€‚</li>
<li><strong>è¡Œä¸ºæ¨¡å¼</strong>: è´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£å§”æ´¾ã€‚</li>
</ul>
<h3><span id="chuang-jian-xing-mo-shi">åˆ›å»ºå‹æ¨¡å¼</span><a href="#chuang-jian-xing-mo-shi" class="header-anchor">#</a></h3><h4><span id="simple-factory-pattern-jian-dan-gong-han"><strong>simple_factory_pattern(ç®€å•å·¥å‚)</strong></span><a href="#simple-factory-pattern-jian-dan-gong-han" class="header-anchor">#</a></h4><h4><span id="factory-method-gong-han-fang-fa"><strong>Factory Method(å·¥å‚æ–¹æ³•)</strong></span><a href="#factory-method-gong-han-fang-fa" class="header-anchor">#</a></h4><blockquote>
<blockquote>
<p>åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œ å…è®¸<code>å­ç±»å†³å®šå®ä¾‹åŒ–</code>å¯¹è±¡çš„ç±»å‹ã€‚</p>
</blockquote>
</blockquote>
<p>è¦è§£å†³çš„é—®é¢˜ï¼š</p>
<blockquote>
<blockquote>
<p>å½“å¢åŠ ä¸€ä¸ªæ–°ç±»ï¼Œå’Œå…¶ä»–ç±»<code>ä½è€¦åˆ</code></p>
</blockquote>
</blockquote>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<blockquote>
<blockquote>
<p>å¢åŠ ä¸€ä¸ªå­ç±»çš„æŠ½è±¡ç±»ï¼Œæ‰€æœ‰çš„å­ç±»ç»§æ‰¿äºæŠ½è±¡ç±»ï¼Œå¹¶ä¸”å†™çˆ¶ç±»çš„å®ç°</p>
</blockquote>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">product</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">product</span>() {}
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">phone</span> : <span class="hljs-keyword">public</span> product
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">phone</span>()
    {
        std::cout &lt;&lt; <span class="hljs-string">"make phone"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">tv</span> : <span class="hljs-keyword">public</span> product
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">tv</span>()
    {
        std::cout &lt;&lt; <span class="hljs-string">"make tv"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">factory</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">factory</span>() {}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> product* <span class="hljs-title">make_product</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>; 
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">phone_factory</span> : <span class="hljs-keyword">public</span> factory
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> product* <span class="hljs-title">make_product</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">phone</span>();
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">tv_factory</span> : <span class="hljs-keyword">public</span> factory
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> product* <span class="hljs-title">make_product</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">tv</span>();
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>
<span class="hljs-function"></span>{
    factory* factory1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">phone_factory</span>();
    product* product1 = factory1-&gt;<span class="hljs-built_in">make_product</span>();

    factory* factory2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">tv_factory</span>();
    product* product2 = factory2-&gt;<span class="hljs-built_in">make_product</span>();

    <span class="hljs-keyword">delete</span> factory1;
    <span class="hljs-keyword">delete</span> product1;
    <span class="hljs-keyword">delete</span> factory2;
    <span class="hljs-keyword">delete</span> product2;
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

<h4><span id="abstract-factory-chou-xiang-gong-han-mo-shi">Abstract Factory(æŠ½è±¡å·¥å‚æ¨¡å¼)</span><a href="#abstract-factory-chou-xiang-gong-han-mo-shi" class="header-anchor">#</a></h4><blockquote>
<blockquote>
<p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæ›´å¤šçš„ç±»éœ€è¦åˆ›å»ºï¼Œæ¯”å¦‚<strong>ç¾å›½å·¥å‚ï¼Œæ¬§æ´²å·¥å‚ï¼Œäºšæ´²å·¥å‚ï¼Œå—ç¾å·¥å‚</strong>ï¼Œæ¯ä¸ªåœ°åŒºå·¥å‚åˆéœ€è¦<strong>åˆ›å»ºå„è‡ªçš„äº§å“</strong></p>
</blockquote>
</blockquote>
<p>é—®é¢˜ï¼š</p>
<blockquote>
<blockquote>
<p>æ¯ä¸ªåœ°åŒºç”Ÿäº§çš„äº§å“æ‹¥æœ‰ä¸€ä¸ªé£æ ¼ï¼Œä¸åŒåœ°åŒºçš„äº§å“æ··æ‚ä¸€èµ·å¯¹é¡¾å®¢ä¸å‹å¥½</p>
<p>ä¿æŒæ ¸å¿ƒä»£ç ä¸ä¿®æ”¹ã€‚</p>
</blockquote>
</blockquote>
<p>è§£å†³ï¼š</p>
<blockquote>
<blockquote>
<p>é¦–å…ˆï¼Œ æŠ½è±¡å·¥å‚æ¨¡å¼å»ºè®®ä¸ºç³»åˆ—ä¸­çš„æ¯ä»¶äº§å“æ˜ç¡®å£°æ˜æ¥å£ ï¼ˆä¾‹å¦‚phoneã€ tvï¼‰ã€‚ ç„¶åï¼Œ ç¡®ä¿æ‰€æœ‰äº§å“å˜ä½“éƒ½ç»§æ‰¿è¿™äº›æ¥å£ã€‚ ä¾‹å¦‚ï¼Œ æ‰€æœ‰é£æ ¼çš„æ¤…å­éƒ½å®ç° <code>phone</code>æ¥å£ï¼› æ‰€æœ‰é£æ ¼çš„å’–å•¡æ¡Œéƒ½å®ç° <code>tv</code>æ¥å£ï¼Œ ä»¥æ­¤ç±»æ¨ã€‚</p>
</blockquote>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-comment">// é£Ÿè‰åŠ¨ç‰©.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">herbivore</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">herbivore</span>() {}
};

<span class="hljs-comment">// é£Ÿè‚‰åŠ¨ç‰©.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">carnivore</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">carnivore</span>() {}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">eat</span><span class="hljs-params">(herbivore* h)</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// è§’é©¬.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">wildebeest</span> : <span class="hljs-keyword">public</span> herbivore
{
};

<span class="hljs-comment">// é‡ç‰›.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">bison</span> : <span class="hljs-keyword">public</span> herbivore
{
};

<span class="hljs-comment">// ç‹®å­.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">lion</span> : <span class="hljs-keyword">public</span> carnivore
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eat</span><span class="hljs-params">(herbivore*)</span></span>
<span class="hljs-function">    </span>{
        std::cout &lt;&lt; <span class="hljs-string">"lion eat wildebeest"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-comment">// ç‹¼.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">wolf</span> : <span class="hljs-keyword">public</span> carnivore
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eat</span><span class="hljs-params">(herbivore*)</span></span>
<span class="hljs-function">    </span>{
        std::cout &lt;&lt; <span class="hljs-string">"wolf eat bison"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-comment">// æŠ½è±¡å·¥å‚.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">factory</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">factory</span>() {}
    <span class="hljs-comment">// åˆ›å»ºé£Ÿè‰åŠ¨ç‰©.</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> herbivore* <span class="hljs-title">create_herbivore</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-comment">// åˆ›å»ºé£Ÿè‚‰åŠ¨ç‰©.</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> carnivore* <span class="hljs-title">create_carnivore</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// éæ´²å·¥å‚.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">africa_factory</span> : <span class="hljs-keyword">public</span> factory
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> herbivore* <span class="hljs-title">create_herbivore</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">wildebeest</span>();
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> carnivore* <span class="hljs-title">create_carnivore</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">lion</span>();
    }
};

<span class="hljs-comment">// ç¾æ´²å·¥å‚.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">america_factory</span> : <span class="hljs-keyword">public</span> factory
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> herbivore* <span class="hljs-title">create_herbivore</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">bison</span>();
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> carnivore* <span class="hljs-title">create_carnivore</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">wolf</span>();
    }
};

<span class="hljs-comment">// åŠ¨ç‰©ä¸–ç•Œï¼ˆå®¢æˆ·ç«¯ï¼‰.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">animal_world</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">animal_world</span>(factory* f)
    {
        _herbivore = f-&gt;<span class="hljs-built_in">create_herbivore</span>(); 
        _carnivore = f-&gt;<span class="hljs-built_in">create_carnivore</span>();
    }

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        _carnivore-&gt;<span class="hljs-built_in">eat</span>(_herbivore);
    }

<span class="hljs-keyword">private</span>:
    herbivore* _herbivore;
    carnivore* _carnivore;
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>
<span class="hljs-function"></span>{
    factory* factory1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">africa_factory</span>();
    animal_world* world1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">animal_world</span>(factory1);
    world1-&gt;<span class="hljs-built_in">start</span>();

    factory* factory2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">america_factory</span>();
    animal_world* world2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">animal_world</span>(factory2);
    world2-&gt;<span class="hljs-built_in">start</span>();

    <span class="hljs-keyword">delete</span> factory1;
    <span class="hljs-keyword">delete</span> world1;
    <span class="hljs-keyword">delete</span> factory2;
    <span class="hljs-keyword">delete</span> world2;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

<h4><span id="singletonton-pattern-dan-li-mo-shi">singletonton_pattern(å•ä¾‹æ¨¡å¼)</span><a href="#singletonton-pattern-dan-li-mo-shi" class="header-anchor">#</a></h4><blockquote>
<blockquote>
<p>ä¿è¯ä¸€ä¸ªç±»<strong>åªæœ‰ä¸€ä¸ªå®ä¾‹</strong>ï¼Œ å¹¶æä¾›ä¸€ä¸ªè®¿é—®è¯¥<strong>å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹</strong>ã€‚</p>
</blockquote>
</blockquote>
<p>é—®é¢˜ï¼š</p>
<blockquote>
<blockquote>
<p>åŒæ—¶è§£å†³äº†ä¸¤ä¸ªé—®é¢˜, ä½†è¿åäº†å•ä¸€èŒè´£åŸåˆ™</p>
</blockquote>
</blockquote>
<p>è§£å†³ï¼š</p>
<blockquote>
<blockquote>
<ul>
<li><p>å°†é»˜è®¤æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œ é˜²æ­¢å…¶ä»–å¯¹è±¡ä½¿ç”¨å•ä¾‹ç±»çš„ <code>new</code>è¿ç®—ç¬¦ã€‚</p>
</li>
<li><p>æ–°å»ºä¸€ä¸ªé™æ€æ„å»ºæ–¹æ³•ä½œä¸ºæ„é€ å‡½æ•°ã€‚ è¯¥å‡½æ•°ä¼š â€œå·å·â€ è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œ å¹¶å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ä¸­ã€‚ æ­¤åæ‰€æœ‰å¯¹äºè¯¥å‡½æ•°çš„è°ƒç”¨éƒ½å°†è¿”å›è¿™ä¸€ç¼“å­˜å¯¹è±¡ã€‚</p>
</li>
</ul>
</blockquote>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">singleton</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">singleton</span>() = <span class="hljs-keyword">default</span>;
    <span class="hljs-built_in">singleton</span>(<span class="hljs-type">const</span> singleton&amp;) = <span class="hljs-keyword">delete</span>;
    singleton&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> singleton&amp;) = <span class="hljs-keyword">delete</span>;

    <span class="hljs-function"><span class="hljs-type">static</span> singleton&amp; <span class="hljs-title">get_instance</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-type">static</span> singleton s;
        <span class="hljs-keyword">return</span> s;
    }

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Hello world"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>
<span class="hljs-function"></span>{
    singleton::<span class="hljs-built_in">get_instance</span>().<span class="hljs-built_in">print</span>();
    singleton::<span class="hljs-built_in">get_instance</span>().<span class="hljs-built_in">print</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</code></pre></div>

<h4><span id="prototype-pattern-yuan-xing-mo-shi">prototype_pattern(åŸå‹æ¨¡å¼)</span><a href="#prototype-pattern-yuan-xing-mo-shi" class="header-anchor">#</a></h4><blockquote>
<blockquote>
<p>ä½¿ä½ èƒ½å¤Ÿå¤åˆ¶å·²æœ‰å¯¹è±¡ï¼Œ è€Œåˆæ— éœ€ä½¿ä»£ç ä¾èµ–å®ƒä»¬æ‰€å±çš„ç±»ã€‚</p>
</blockquote>
</blockquote>
<p>é—®é¢˜ï¼š</p>
<blockquote>
<blockquote>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œ å¹¶å¸Œæœ›ç”Ÿæˆä¸å…¶å®Œå…¨ç›¸åŒçš„ä¸€ä¸ªå¤åˆ¶å“ï¼Œ ä½ è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ é¦–å…ˆï¼Œ ä½ å¿…é¡»æ–°å»ºä¸€ä¸ªå±äºç›¸åŒç±»çš„å¯¹è±¡ã€‚ ç„¶åï¼Œ ä½ å¿…é¡»éå†åŸå§‹å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œ å¹¶å°†æˆå‘˜å˜é‡å€¼å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­ã€‚</p>
<p>ä¸é”™ï¼ ä½†æœ‰ä¸ªå°é—®é¢˜ã€‚ å¹¶éæ‰€æœ‰å¯¹è±¡éƒ½èƒ½é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œå¤åˆ¶ï¼Œ å› ä¸ºæœ‰äº›å¯¹è±¡å¯èƒ½æ‹¥æœ‰ç§æœ‰æˆå‘˜å˜é‡ï¼Œ å®ƒä»¬åœ¨å¯¹è±¡æœ¬èº«ä»¥å¤–æ˜¯ä¸å¯è§çš„ã€‚</p>
</blockquote>
<p>ç›´æ¥å¤åˆ¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚ å› ä¸ºä½ å¿…é¡»çŸ¥é“å¯¹è±¡æ‰€å±çš„ç±»æ‰èƒ½åˆ›å»ºå¤åˆ¶å“ï¼Œ æ‰€ä»¥ä»£ç å¿…é¡»ä¾èµ–è¯¥ç±»ã€‚ å³ä½¿ä½ å¯ä»¥æ¥å—é¢å¤–çš„ä¾èµ–æ€§ï¼Œ é‚£è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼š æœ‰æ—¶ä½ åªçŸ¥é“å¯¹è±¡æ‰€å®ç°çš„æ¥å£ï¼Œ è€Œä¸çŸ¥é“å…¶æ‰€å±çš„å…·ä½“ç±»ï¼Œ æ¯”å¦‚å¯å‘æ–¹æ³•çš„æŸä¸ªå‚æ•°ä¼ å…¥å®ç°äº†æŸä¸ªæ¥å£çš„ä»»ä½•å¯¹è±¡ã€‚</p>
</blockquote>
<p>è§£å†³ï¼š</p>
<blockquote>
<blockquote>
<p>åŸå‹æ¨¡å¼å°†å…‹éš†è¿‡ç¨‹å§”æ´¾ç»™è¢«å…‹éš†çš„å®é™…å¯¹è±¡ã€‚ æ¨¡å¼ä¸ºæ‰€æœ‰æ”¯æŒå…‹éš†çš„å¯¹è±¡å£°æ˜äº†ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œ è¯¥æ¥å£è®©ä½ èƒ½å¤Ÿå…‹éš†å¯¹è±¡ï¼Œ åŒæ—¶åˆæ— éœ€å°†ä»£ç å’Œå¯¹è±¡æ‰€å±ç±»è€¦åˆã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œ è¿™æ ·çš„æ¥å£ä¸­ä»…åŒ…å«ä¸€ä¸ª <code>å…‹éš†</code>æ–¹æ³•ã€‚</p>
<p>æ‰€æœ‰çš„ç±»å¯¹ <code>å…‹éš†</code>æ–¹æ³•çš„å®ç°éƒ½éå¸¸ç›¸ä¼¼ã€‚ è¯¥æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå½“å‰ç±»çš„å¯¹è±¡ï¼Œ ç„¶åå°†åŸå§‹å¯¹è±¡æ‰€æœ‰çš„æˆå‘˜å˜é‡å€¼å¤åˆ¶åˆ°æ–°å»ºçš„ç±»ä¸­ã€‚ ä½ ç”šè‡³å¯ä»¥å¤åˆ¶ç§æœ‰æˆå‘˜å˜é‡ï¼Œ å› ä¸ºç»å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½å…è®¸å¯¹è±¡è®¿é—®å…¶åŒç±»å¯¹è±¡çš„ç§æœ‰æˆå‘˜å˜é‡ã€‚</p>
<p>æ”¯æŒå…‹éš†çš„å¯¹è±¡å³ä¸º<em>åŸå‹</em>ã€‚ å½“ä½ çš„å¯¹è±¡æœ‰å‡ åä¸ªæˆå‘˜å˜é‡å’Œå‡ ç™¾ç§ç±»å‹æ—¶ï¼Œ å¯¹å…¶è¿›è¡Œå…‹éš†ç”šè‡³å¯ä»¥ä»£æ›¿å­ç±»çš„æ„é€ ã€‚</p>
</blockquote>
<blockquote>
<p>å…¶è¿ä½œæ–¹å¼å¦‚ä¸‹ï¼š åˆ›å»ºä¸€ç³»åˆ—ä¸åŒç±»å‹çš„å¯¹è±¡å¹¶ä¸åŒçš„æ–¹å¼å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ å¦‚æœæ‰€éœ€å¯¹è±¡ä¸é¢„å…ˆé…ç½®çš„å¯¹è±¡ç›¸åŒï¼Œ é‚£ä¹ˆä½ åªéœ€å…‹éš†åŸå‹å³å¯ï¼Œ æ— éœ€æ–°å»ºä¸€ä¸ªå¯¹è±¡ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<p>å¯ä»¥ç±»æ¯”<strong>æœ‰ä¸åˆ†è£‚</strong>ï¼šç”±äºå·¥ä¸šåŸå‹å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„è‡ªæˆ‘å¤åˆ¶ï¼Œ å› æ­¤ç»†èƒæœ‰ä¸åˆ†è£‚ ï¼ˆè¿˜è®°å¾—ç”Ÿç‰©å­¦çŸ¥è¯†å—ï¼Ÿï¼‰ æˆ–è®¸æ˜¯æ›´æ°å½“çš„ç±»æ¯”ã€‚ æœ‰ä¸åˆ†è£‚ä¼šäº§ç”Ÿä¸€å¯¹å®Œå…¨ç›¸åŒçš„ç»†èƒã€‚ åŸå§‹ç»†èƒå°±æ˜¯ä¸€ä¸ªåŸå‹ï¼Œ å®ƒåœ¨å¤åˆ¶ä½“çš„ç”Ÿæˆè¿‡ç¨‹ä¸­èµ·åˆ°äº†æ¨åŠ¨ä½œç”¨ã€‚</p>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-comment">// #include &lt;vector&gt;</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">resume</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">resume</span>() {}
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">resume</span>() {}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> resume* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; }
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">set</span><span class="hljs-params">(<span class="hljs-type">char</span>*)</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>{}

<span class="hljs-keyword">protected</span>:
    <span class="hljs-type">char</span>* _name = <span class="hljs-literal">nullptr</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">resume_a</span> : <span class="hljs-keyword">public</span> resume
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">resume_a</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str)
    {
        <span class="hljs-keyword">if</span> (str == <span class="hljs-literal">nullptr</span>)
        {
            _name = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">1</span>];
            _name[<span class="hljs-number">0</span>] = <span class="hljs-string">'\0'</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            _name = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-built_in">strlen</span>(str) + <span class="hljs-number">1</span>];
            <span class="hljs-built_in">strcpy</span>(_name, str);
        }
    }

    ~<span class="hljs-built_in">resume_a</span>()
    {
        <span class="hljs-keyword">if</span> (_name != <span class="hljs-literal">nullptr</span>)
        {
            <span class="hljs-keyword">delete</span> [] _name;
            _name = <span class="hljs-literal">nullptr</span>;
        }
    }

    <span class="hljs-built_in">resume_a</span>(<span class="hljs-type">const</span> resume_a&amp; other)
    {
        <span class="hljs-keyword">if</span> (_name != <span class="hljs-literal">nullptr</span>)
        {
            <span class="hljs-keyword">delete</span> [] _name;
            _name = <span class="hljs-literal">nullptr</span>;
        }
        _name = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-built_in">strlen</span>(other._name) + <span class="hljs-number">1</span>];
        <span class="hljs-built_in">strcpy</span>(_name, other._name);
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> resume_a* <span class="hljs-title">clone</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">resume_a</span>(*<span class="hljs-keyword">this</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        std::cout &lt;&lt; <span class="hljs-string">"resume_a name: "</span> &lt;&lt; _name &lt;&lt; std::endl;
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>
<span class="hljs-function"></span>{
    resume* r1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">resume_a</span>(<span class="hljs-string">"A"</span>);
    resume* r2 = r1-&gt;<span class="hljs-built_in">clone</span>();
    r1-&gt;<span class="hljs-built_in">show</span>();
    <span class="hljs-keyword">delete</span> r1;
    r2-&gt;<span class="hljs-built_in">show</span>();
    <span class="hljs-keyword">delete</span> r2;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

<h4><span id="builder-pattern-sheng-cheng-qi-mo-shi">builder_pattern(ç”Ÿæˆå™¨æ¨¡å¼)</span><a href="#builder-pattern-sheng-cheng-qi-mo-shi" class="header-anchor">#</a></h4><blockquote>
<blockquote>
<p>ä½¿ä½ èƒ½å¤Ÿåˆ†æ­¥éª¤åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚ è¯¥æ¨¡å¼å…è®¸ä½ ä½¿ç”¨ç›¸åŒçš„åˆ›å»ºä»£ç ç”Ÿæˆä¸åŒç±»å‹å’Œå½¢å¼çš„å¯¹è±¡ã€‚</p>
</blockquote>
</blockquote>
<p>é—®é¢˜ï¼š</p>
<blockquote>
<blockquote>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œ åœ¨å¯¹å…¶è¿›è¡Œæ„é€ æ—¶éœ€è¦å¯¹è¯¸å¤šæˆå‘˜å˜é‡å’ŒåµŒå¥—å¯¹è±¡è¿›è¡Œç¹å¤çš„åˆå§‹åŒ–å·¥ä½œã€‚ è¿™äº›åˆå§‹åŒ–ä»£ç é€šå¸¸æ·±è—äºä¸€ä¸ªåŒ…å«ä¼—å¤šå‚æ•°ä¸”è®©äººåŸºæœ¬çœ‹ä¸æ‡‚çš„æ„é€ å‡½æ•°ä¸­ï¼› ç”šè‡³è¿˜æœ‰æ›´ç³Ÿç³•çš„æƒ…å†µï¼Œ é‚£å°±æ˜¯è¿™äº›ä»£ç æ•£è½åœ¨å®¢æˆ·ç«¯ä»£ç çš„å¤šä¸ªä½ç½®ã€‚<br>ä¾‹å¦‚ï¼Œ æˆ‘ä»¬æ¥æ€è€ƒå¦‚ä½•åˆ›å»ºä¸€ä¸ª æˆ¿å±‹Houseå¯¹è±¡ã€‚ å»ºé€ ä¸€æ ‹ç®€å•çš„æˆ¿å±‹ï¼Œ é¦–å…ˆä½ éœ€è¦å»ºé€ å››é¢å¢™å’Œåœ°æ¿ï¼Œ å®‰è£…æˆ¿é—¨å’Œä¸€å¥—çª—æˆ·ï¼Œ ç„¶åå†å»ºé€ ä¸€ä¸ªå±‹é¡¶ã€‚ ä½†æ˜¯å¦‚æœä½ æƒ³è¦ä¸€æ ‹æ›´å®½æ•æ›´æ˜äº®çš„æˆ¿å±‹ï¼Œ è¿˜è¦æœ‰é™¢å­å’Œå…¶ä»–è®¾æ–½ ï¼ˆä¾‹å¦‚æš–æ°”ã€ æ’æ°´å’Œä¾›ç”µè®¾å¤‡ï¼‰ï¼Œ é‚£åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
</blockquote>
</blockquote>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ‰©å±• æˆ¿å±‹åŸºç±»ï¼Œ ç„¶ååˆ›å»ºä¸€ç³»åˆ—æ¶µç›–æ‰€æœ‰å‚æ•°ç»„åˆçš„å­ç±»ã€‚ ä½†æœ€ç»ˆä½ å°†é¢å¯¹ç›¸å½“æ•°é‡çš„å­ç±»ã€‚ ä»»ä½•æ–°å¢çš„å‚æ•° ï¼ˆä¾‹å¦‚é—¨å»Šç±»å‹ï¼‰ éƒ½ä¼šè®©è¿™ä¸ªå±‚æ¬¡ç»“æ„æ›´åŠ å¤æ‚ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•åˆ™æ— éœ€ç”Ÿæˆå­ç±»ã€‚ ä½ å¯ä»¥åœ¨ æˆ¿å±‹åŸºç±»ä¸­åˆ›å»ºä¸€ä¸ªåŒ…æ‹¬æ‰€æœ‰å¯èƒ½å‚æ•°çš„è¶…çº§æ„é€ å‡½æ•°ï¼Œ å¹¶ç”¨å®ƒæ¥æ§åˆ¶æˆ¿å±‹å¯¹è±¡ã€‚ è¿™ç§æ–¹æ³•ç¡®å®å¯ä»¥é¿å…ç”Ÿæˆå­ç±»ï¼Œ ä½†å®ƒå´ä¼šé€ æˆå¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œ ç»å¤§éƒ¨åˆ†çš„å‚æ•°éƒ½æ²¡æœ‰ä½¿ç”¨ï¼Œ è¿™ä½¿å¾—å¯¹äºæ„é€ å‡½æ•°çš„è°ƒç”¨ååˆ†ä¸ç®€æ´ã€‚ ä¾‹å¦‚ï¼Œ åªæœ‰å¾ˆå°‘çš„æˆ¿å­æœ‰æ¸¸æ³³æ± ï¼Œ å› æ­¤ä¸æ¸¸æ³³æ± ç›¸å…³çš„å‚æ•°åä¹‹å…«ä¹æ˜¯æ¯«æ— ç”¨å¤„çš„ã€‚</p>
<p>è§£å†³ï¼š</p>
<blockquote>
<blockquote>
<p>ç”Ÿæˆå™¨æ¨¡å¼å»ºè®®å°†å¯¹è±¡æ„é€ ä»£ç ä»äº§å“ç±»ä¸­æŠ½å–å‡ºæ¥ï¼Œ å¹¶å°†å…¶æ”¾åœ¨ä¸€ä¸ªåä¸ºç”Ÿæˆå™¨çš„ç‹¬ç«‹å¯¹è±¡ä¸­ã€‚<br>è¯¥æ¨¡å¼ä¼šå°†å¯¹è±¡æ„é€ è¿‡ç¨‹åˆ’åˆ†ä¸ºä¸€ç»„æ­¥éª¤ï¼Œ æ¯”å¦‚ buildÂ­Wallsåˆ›å»ºå¢™å£å’Œ buildÂ­Dooråˆ›å»ºæˆ¿é—¨åˆ›å»ºæˆ¿é—¨ç­‰ã€‚ æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ ä½ éƒ½éœ€è¦é€šè¿‡ç”Ÿæˆå™¨å¯¹è±¡æ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ã€‚ é‡ç‚¹åœ¨äºä½ æ— éœ€è°ƒç”¨æ‰€æœ‰æ­¥éª¤ï¼Œ è€Œåªéœ€è°ƒç”¨åˆ›å»ºç‰¹å®šå¯¹è±¡é…ç½®æ‰€éœ€çš„é‚£äº›æ­¥éª¤å³å¯ã€‚</p>
</blockquote>
</blockquote>
<p>å½“ä½ éœ€è¦åˆ›å»ºä¸åŒå½¢å¼çš„äº§å“æ—¶ï¼Œ å…¶ä¸­çš„ä¸€äº›æ„é€ æ­¥éª¤å¯èƒ½éœ€è¦ä¸åŒçš„å®ç°ã€‚ ä¾‹å¦‚ï¼Œ æœ¨å±‹çš„æˆ¿é—¨å¯èƒ½éœ€è¦ä½¿ç”¨æœ¨å¤´åˆ¶é€ ï¼Œ è€ŒåŸå ¡çš„æˆ¿é—¨åˆ™å¿…é¡»ä½¿ç”¨çŸ³å¤´åˆ¶é€ ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒçš„ç”Ÿæˆå™¨ï¼Œ ç”¨ä¸åŒæ–¹å¼å®ç°ä¸€ç»„ç›¸åŒçš„åˆ›å»ºæ­¥éª¤ã€‚ ç„¶åä½ å°±å¯ä»¥åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨è¿™äº›ç”Ÿæˆå™¨ ï¼ˆä¾‹å¦‚æŒ‰é¡ºåºè°ƒç”¨å¤šä¸ªæ„é€ æ­¥éª¤ï¼‰ æ¥ç”Ÿæˆä¸åŒç±»å‹çš„å¯¹è±¡ã€‚</p>
<blockquote>
<blockquote>
<p>ä¾‹å¦‚ï¼Œ å‡è®¾ç¬¬ä¸€ä¸ªå»ºé€ è€…ä½¿ç”¨æœ¨å¤´å’Œç»ç’ƒåˆ¶é€ æˆ¿å±‹ï¼Œ ç¬¬äºŒä¸ªå»ºé€ è€…ä½¿ç”¨çŸ³å¤´å’Œé’¢é“ï¼Œ è€Œç¬¬ä¸‰ä¸ªå»ºé€ è€…ä½¿ç”¨é»„é‡‘å’Œé’»çŸ³ã€‚ åœ¨è°ƒç”¨åŒä¸€ç»„æ­¥éª¤åï¼Œ ç¬¬ä¸€ä¸ªå»ºé€ è€…ä¼šç»™ä½ ä¸€æ ‹æ™®é€šæˆ¿å±‹ï¼Œ ç¬¬äºŒä¸ªä¼šç»™ä½ ä¸€åº§å°åŸå ¡ï¼Œ è€Œç¬¬ä¸‰ä¸ªåˆ™ä¼šç»™ä½ ä¸€åº§å®«æ®¿ã€‚ ä½†æ˜¯ï¼Œ åªæœ‰åœ¨è°ƒç”¨æ„é€ æ­¥éª¤çš„å®¢æˆ·ç«¯ä»£ç å¯ä»¥é€šè¿‡é€šç”¨æ¥å£ä¸å»ºé€ è€…è¿›è¡Œäº¤äº’æ—¶ï¼Œ è¿™æ ·çš„è°ƒç”¨æ‰èƒ½è¿”å›éœ€è¦çš„æˆ¿å±‹ã€‚<br><strong>ä¸»ç®¡</strong><br>ä½ å¯ä»¥è¿›ä¸€æ­¥å°†ç”¨äºåˆ›å»ºäº§å“çš„ä¸€ç³»åˆ—ç”Ÿæˆå™¨æ­¥éª¤è°ƒç”¨æŠ½å–æˆä¸ºå•ç‹¬çš„ä¸»ç®¡ç±»ã€‚ ä¸»ç®¡ç±»å¯å®šä¹‰åˆ›å»ºæ­¥éª¤çš„æ‰§è¡Œé¡ºåºï¼Œ è€Œç”Ÿæˆå™¨åˆ™æä¾›è¿™äº›æ­¥éª¤çš„å®ç°ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>ä¸¥æ ¼æ¥è¯´ï¼Œ ä½ çš„ç¨‹åºä¸­å¹¶ä¸ä¸€å®šéœ€è¦ä¸»ç®¡ç±»ã€‚ å®¢æˆ·ç«¯ä»£ç å¯ç›´æ¥ä»¥ç‰¹å®šé¡ºåºè°ƒç”¨åˆ›å»ºæ­¥éª¤ã€‚ ä¸è¿‡ï¼Œ ä¸»ç®¡ç±»ä¸­éå¸¸é€‚åˆæ”¾å…¥å„ç§ä¾‹è¡Œæ„é€ æµç¨‹ï¼Œ ä»¥ä¾¿åœ¨ç¨‹åºä¸­åå¤ä½¿ç”¨ã€‚</p>
</blockquote>
</blockquote>
<p>æ­¤å¤–ï¼Œ å¯¹äºå®¢æˆ·ç«¯ä»£ç æ¥è¯´ï¼Œ ä¸»ç®¡ç±»å®Œå…¨éšè—äº†äº§å“æ„é€ ç»†èŠ‚ã€‚ å®¢æˆ·ç«¯åªéœ€è¦å°†ä¸€ä¸ªç”Ÿæˆå™¨ä¸ä¸»ç®¡ç±»å…³è”ï¼Œ ç„¶åä½¿ç”¨ä¸»ç®¡ç±»æ¥æ„é€ äº§å“ï¼Œ å°±èƒ½ä»ç”Ÿæˆå™¨å¤„è·å¾—æ„é€ ç»“æœäº†ã€‚</p>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-comment">// äº§å“.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">product</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; product_name)</span></span>
<span class="hljs-function">    </span>{
        _product_name_vec.<span class="hljs-built_in">emplace_back</span>(product_name);
    }

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; name : _product_name_vec)
        {
            std::cout &lt;&lt; name &lt;&lt; std::endl;
        }
    }

<span class="hljs-keyword">private</span>:
    std::vector&lt;std::string&gt; _product_name_vec;
};

<span class="hljs-comment">// æŠ½è±¡å»ºé€ è€….</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">builder</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">builder</span>() {}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_ricenoodles</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_cooldish</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_drink</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> product* <span class="hljs-title">get_product</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// å»ºé€ è€…A.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">builder_a</span> : <span class="hljs-keyword">public</span> builder
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">builder_a</span>()
    {
        _product = <span class="hljs-keyword">new</span> product;
    }

    ~<span class="hljs-built_in">builder_a</span>()
    {
        <span class="hljs-keyword">delete</span> _product;
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_ricenoodles</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        _product-&gt;<span class="hljs-built_in">add</span>(<span class="hljs-string">"ricenoodles a"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_cooldish</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        _product-&gt;<span class="hljs-built_in">add</span>(<span class="hljs-string">"cooldish a"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">build_drink</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        _product-&gt;<span class="hljs-built_in">add</span>(<span class="hljs-string">"drink a"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">virtual</span> product* <span class="hljs-title">get_product</span><span class="hljs-params">()</span></span>
<span class="hljs-function">    </span>{
        <span class="hljs-keyword">return</span> _product;
    }

<span class="hljs-keyword">private</span>:
    product* _product;
};

<span class="hljs-comment">// å¯¼æ¼”.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">director</span>
{
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">construct</span><span class="hljs-params">(builder* b)</span></span>
<span class="hljs-function">    </span>{
        b-&gt;<span class="hljs-built_in">build_ricenoodles</span>();
        b-&gt;<span class="hljs-built_in">build_cooldish</span>();
        b-&gt;<span class="hljs-built_in">build_drink</span>();
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>
<span class="hljs-function"></span>{
    director* d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">director</span>();
    builder* b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">builder_a</span>();
    d-&gt;<span class="hljs-built_in">construct</span>(b);
    product* p = b-&gt;<span class="hljs-built_in">get_product</span>();
    p-&gt;<span class="hljs-built_in">show</span>();

    <span class="hljs-keyword">delete</span> b;
    <span class="hljs-keyword">delete</span> d;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">è®¾è®¡æ¨¡å¼</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/01/%E7%AE%97%E6%B3%95/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ç®—æ³•</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/12/26/gdb%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/">
                        <span class="hidden-mobile">gdbä»£ç è°ƒè¯•å·¥å…·</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="lv-container" data-id="city" data-uid="MTAyMC81NTMzMi8zMTc5OQ==">
    <script type="text/javascript">
      Fluid.utils.loadComments('#lv-container', function() {
        Fluid.utils.createScript('https://cdn-city.livere.com/js/embed.dist.js');
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
