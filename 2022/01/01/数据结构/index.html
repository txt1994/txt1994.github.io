

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.jpg">
  <link rel="icon" href="/img/logo.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#6aa84f">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚ æ•°æ®ç»“æ„éƒ¨åˆ† ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§ äºŒ å¸¸è§æ•°æ®ç»“æ„å®ç°        æ¨èçœ‹ğŸ‘‰ OI Wiki æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚#ç®—æ³•ï¼šå……åˆ†ä¸”åˆç†åˆ©ç”¨è®¡ç®—æœºèµ„æºå¤„ç†æ•°æ®è€Œè¯ç”Ÿã€‚ æ•°æ®ç»“æ„éƒ¨åˆ†#ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§#1.é¡ºåºå­˜å‚¨(æ•°ç»„,å†…å­˜è¿ç»­)#2.é“¾å¼å­˜å‚¨(é“¾è¡¨,å†…å­˜ä¸è¿ç»­,ä¾é èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹)#å¸¸è§çš„">
<meta property="og:type" content="article">
<meta property="og:title" content="æ•°æ®ç»“æ„">
<meta property="og:url" content="https://txt1994.github.io/2022/01/01/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚ æ•°æ®ç»“æ„éƒ¨åˆ† ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§ äºŒ å¸¸è§æ•°æ®ç»“æ„å®ç°        æ¨èçœ‹ğŸ‘‰ OI Wiki æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚#ç®—æ³•ï¼šå……åˆ†ä¸”åˆç†åˆ©ç”¨è®¡ç®—æœºèµ„æºå¤„ç†æ•°æ®è€Œè¯ç”Ÿã€‚ æ•°æ®ç»“æ„éƒ¨åˆ†#ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§#1.é¡ºåºå­˜å‚¨(æ•°ç»„,å†…å­˜è¿ç»­)#2.é“¾å¼å­˜å‚¨(é“¾è¡¨,å†…å­˜ä¸è¿ç»­,ä¾é èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹)#å¸¸è§çš„">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://txt1994.github.io/img/t01f58cb18416af8e23.jpg">
<meta property="article:published_time" content="2022-01-01T11:32:29.000Z">
<meta property="article:modified_time" content="2022-03-18T16:31:26.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="data-structures">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://txt1994.github.io/img/t01f58cb18416af8e23.jpg">
  
  
  <title>æ•°æ®ç»“æ„ - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->

  
<link rel="stylesheet" href="/css/style.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"txt1994.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>txt1994s</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹è”
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="æ•°æ®ç»“æ„">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-01-01 19:32" pubdate>
        2022å¹´1æœˆ1æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      44k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      370 åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">æ•°æ®ç»“æ„</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2022å¹´3æœˆ19æ—¥ å‡Œæ™¨
                
              </p>
            
            <div class="markdown-body">
              <div class="toc">

<!-- toc -->

<ul>
<li><a href="#shu-ju-jie-gou-shu-ju-jie-gou-shi-wei-suan-fa-fu-wu-er-she-ji-de">æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚</a></li>
<li><a href="#shu-ju-jie-gou-bu-fen">æ•°æ®ç»“æ„éƒ¨åˆ†</a><ul>
<li><a href="#yi-shu-ju-jie-gou-de-cun-chu-fang-shi-you-liang-chong">ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§</a></li>
<li><a href="#er-chang-jian-shu-ju-jie-gou-shi-xian">äºŒ å¸¸è§æ•°æ®ç»“æ„å®ç°</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<p>æ¨èçœ‹ğŸ‘‰ <a target="_blank" rel="noopener" href="https://oi-wiki.org/">OI Wiki</a></p>
<h1><span id="shu-ju-jie-gou-shu-ju-jie-gou-shi-wei-suan-fa-fu-wu-er-she-ji-de">æ•°æ®ç»“æ„ï¼šæ•°æ®ç»“æ„æ˜¯ä¸ºç®—æ³•æœåŠ¡è€Œè®¾è®¡çš„ã€‚</span><a href="#shu-ju-jie-gou-shu-ju-jie-gou-shi-wei-suan-fa-fu-wu-er-she-ji-de" class="header-anchor">#</a></h1><p>ç®—æ³•ï¼šå……åˆ†ä¸”åˆç†åˆ©ç”¨è®¡ç®—æœºèµ„æºå¤„ç†æ•°æ®è€Œè¯ç”Ÿã€‚</p>
<h1><span id="shu-ju-jie-gou-bu-fen">æ•°æ®ç»“æ„éƒ¨åˆ†</span><a href="#shu-ju-jie-gou-bu-fen" class="header-anchor">#</a></h1><h3><span id="yi-shu-ju-jie-gou-de-cun-chu-fang-shi-you-liang-chong">ä¸€. æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§</span><a href="#yi-shu-ju-jie-gou-de-cun-chu-fang-shi-you-liang-chong" class="header-anchor">#</a></h3><h4><span id="1-shun-xu-cun-chu-shu-zu-nei-cun-lian-xu">1.é¡ºåºå­˜å‚¨(æ•°ç»„,å†…å­˜è¿ç»­)</span><a href="#1-shun-xu-cun-chu-shu-zu-nei-cun-lian-xu" class="header-anchor">#</a></h4><h4><span id="2-lian-shi-cun-chu-lian-biao-nei-cun-bu-lian-xu-yi-kao-jie-dian-de-zhi-zhen-zhi-xiang-xia-yi-ge-jie-dian">2.é“¾å¼å­˜å‚¨(é“¾è¡¨,å†…å­˜ä¸è¿ç»­,ä¾é èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹)</span><a href="#2-lian-shi-cun-chu-lian-biao-nei-cun-bu-lian-xu-yi-kao-jie-dian-de-zhi-zhen-zhi-xiang-xia-yi-ge-jie-dian" class="header-anchor">#</a></h4><p>å¸¸è§çš„æ•°æ®ç»“æ„æœ‰ï¼š </p>
<blockquote>
<p> æ•°ç»„(array),é“¾è¡¨(LinkedList),</p>
<p> åŒå‘é“¾è¡¨(doubly-linked-list),</p>
<p> æ ‘ï¼š</p>
<ul>
<li><p>äºŒå‰æ ‘(Binary tree),</p>
</li>
<li><p>äºŒå‰æŸ¥æ‰¾æ ‘(Binary Search Tree),å¹³è¡¡äºŒå‰æ ‘(AVL),</p>
</li>
<li><p>2-3-4æ ‘</p>
</li>
<li><p>çº¢é»‘æ ‘(Red Black Tree), Bæ ‘, B+æ ‘, B*æ ‘, AA-æ ‘</p>
</li>
<li><p>treapæ ‘, k-dæ ‘, ä¼¸å±•æ ‘(Splay Tree)</p>
</li>
<li><p>æœ€å°ç”Ÿæˆæ ‘(<strong>Minimum Spanning Tree</strong>)</p>
</li>
<li><p>å›¾(graph),</p>
</li>
</ul>
<p> æ ˆ(stack), å †(heap),é˜Ÿåˆ—(queue),</p>
<p> æ•£åˆ—è¡¨(hash), ä½å›¾(bitmap),</p>
<p> å­—å…¸(map)</p>
</blockquote>
<h3><span id="er-chang-jian-shu-ju-jie-gou-shi-xian">äºŒ å¸¸è§æ•°æ®ç»“æ„å®ç°</span><a href="#er-chang-jian-shu-ju-jie-gou-shi-xian" class="header-anchor">#</a></h3><h4><span id="1-lian-biao">1.é“¾è¡¨</span><a href="#1-lian-biao" class="header-anchor">#</a></h4><ul>
<li><strong>é“¾è¡¨(LinkedList)</strong></li>
</ul>
<blockquote>
<p>é¿å…æ•°ç»„æ’å…¥å’Œåˆ é™¤çš„çº¿æ€§å¼€é”€,æˆ‘ä»¬éœ€è¦å…è®¸è¡¨å¯ä»¥ä¸è¿ç»­å­˜å‚¨,é˜²æ­¢æ•°æ®å¤§é‡ç§»åŠ¨</p>
</blockquote>
<ul>
<li><strong>é“¾è¡¨çš„è®¾è®¡</strong></li>
</ul>
<p>è®¾è®¡æˆä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹è‡³å°‘åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<blockquote>
<p>æ•°æ®éƒ¨å’ŒæŒ‡é’ˆéƒ¨</p>
<p>æ•°æ®éƒ¨ä¸ºæˆ‘ä»¬è¦å­˜å‚¨çš„æ•°æ®,æŒ‡é’ˆéƒ¨ä¸ºæŒ‡å‘ä¸‹ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹</p>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElmt_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElmt_</span> *next;
} ListElmt;</code></pre></div>



<h5><span id="dan-xiang-lian-biao">å•å‘é“¾è¡¨</span><a href="#dan-xiang-lian-biao" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElmt_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElmt_</span> *next;
} ListElmt;</code></pre></div>

<h6><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs hpp"><span class="hljs-comment">/*1ist.h*/</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> LIST_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> LIST_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-comment">/* Define a structure for linked list elements. */</span> 
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElnt_</span>
{
    <span class="hljs-type">void</span> *data:
	<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ListElnt</span> *next;
} ListElmt;

<span class="hljs-comment">/* Define a structure for linked lists, */</span> 
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">List_</span>
{
    <span class="hljs-type">int</span> size:
	<span class="hljs-built_in">int</span> (*<span class="hljs-built_in">match</span>()<span class="hljs-type">const</span> <span class="hljs-type">void</span> *keyl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2);
    <span class="hljs-built_in">void</span> (*destroy)(<span class="hljs-type">void</span> *data);
	ListElmt *head;
    ListElmt *tail;
} List;

<span class="hljs-comment">/* Public Interface*/</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">list_init</span><span class="hljs-params">(List *list, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªé“¾è¡¨ä»¥ä¾¿äºè¿›è¡Œåç»­æ“ä½œ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">list_destroy</span><span class="hljs-params">(List *list)</span></span>;	
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">list_ins_next</span><span class="hljs-params">(List *list, ListEInt *element, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>; 
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">list_rem_next</span><span class="hljs-params">(List *list, ListElnt *element, <span class="hljs-type">void</span> **data)</span></span>; 

<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_size(list()(list)-&gt;size)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_head(list()(list)-&gt;head) </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_tail(1ist()(1ist)-&gt;tail)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_is_head(list, element()(element)= (list)-&gt;head ? 1: 0) </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_is_tail(element()(element)-&gt;next  NULL ? 1:0)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_data(element()(element)-&gt;data) </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> list_next(element()(element)-&gt;next)</span>

<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* list.c*/</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>
<span class="hljs-comment">/*list init */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">list_init</span><span class="hljs-params">(List *list, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span> </span>{
	<span class="hljs-comment">/* Initialize the list. */</span>
	list-&gt;size = <span class="hljs-number">0</span>;
	list-&gt;destroy = destroy; 
    list-&gt;head = <span class="hljs-literal">NULL</span>; 
    list-&gt;tail = <span class="hljs-literal">NULL</span>;
}

<span class="hljs-comment">/*listdestroy*/</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">list_destroy</span><span class="hljs-params">(List *list)</span> </span>{
	<span class="hljs-type">void</span>* data;
    <span class="hljs-comment">/* Remove each element.*/</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">list_size</span>(list) &gt; <span class="hljs-number">0</span>){
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">list_rem_next</span>(list, <span class="hljs-literal">NULL</span>, (<span class="hljs-type">void</span> **)&amp;data) &amp;&amp; <span class="hljs-literal">NULL</span> != list-&gt;destroy){
    <span class="hljs-comment">/* Call a user-defined function to free dynanically allocated data, */</span> 
        	list-&gt;<span class="hljs-built_in">destroy</span>(data);
        }
    }
	<span class="hljs-comment">/* No operations are allowed now, but clear the structure as a precaution. */</span> 
    <span class="hljs-built_in">memset</span>(list, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(List));
}

<span class="hljs-comment">/*list_ins_next*/</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">list_ins_next</span><span class="hljs-params">(List *list, ListElmt *element,<span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>{ 
    ListElmt*	new_element;
    <span class="hljs-comment">/*Allocate storage for the element. */</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-literal">NULL</span> == (new_element-(ListElmt*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(ListElmt))))
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-comment">/* Insert the element into the list. */</span> 
    new_element-&gt;data = (<span class="hljs-type">void</span> *)data; 
    <span class="hljs-keyword">if</span> (element == <span class="hljs-literal">NULL</span>) {
    	<span class="hljs-comment">/* Handle insertion at the head of the list. */</span> 
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_size</span>(list)==<span class="hljs-number">0</span>)
        	list-&gt;tail = <span class="hljs-keyword">new</span> _element;
        new_element-&gt;next = list-&gt;head; 
        list-&gt;head=new_element; 
    }
    <span class="hljs-keyword">else</span>{
    	<span class="hljs-comment">/* Handle insertion somewhere other than at the head. */</span> 
        <span class="hljs-keyword">if</span>(element-&gt;next == <span class="hljs-literal">NULL</span>)
        list-&gt;tail = new_element;
        new_element-&gt;next = element-&gt;next;
        element-&gt;next = new_element; 
    }
    <span class="hljs-comment">/*Adjust the size of the list to account for the inserted element. */</span> 
    list-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* list_rem_next */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">list_rem_next</span><span class="hljs-params">(List *list, ListElmt *element, <span class="hljs-type">void</span> **data)</span> </span>{
    ListElmt	*old_element;
    
    <span class="hljs-comment">/*Do not allow removal from an empty list.*/</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_size</span>(list) == <span class="hljs-number">0</span>)
		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
	<span class="hljs-comment">/* Remove the element from the list. */</span> 
    <span class="hljs-keyword">if</span> (element == <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">/* Handle removal from the head of the list, */</span>
        *data = list-&gt;head-&gt;data;
        old_element = list-&gt;head; 
        list-&gt;head = list-&gt;head-&gt;next;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_size</span>(list) == <span class="hljs-number">1</span>) 
            list-&gt;tail = <span class="hljs-literal">NULL</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Handle removal from somewhere other than the head. */</span>
        <span class="hljs-keyword">if</span> (elementâ€”&gt;next == <span class="hljs-literal">NULL</span>)
        	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        *data = element-&gt;next-&gt;data; 
        old_element = element-&gt;next;
        element-&gt;next = element-&gt;next-&gt;next;
        <span class="hljs-keyword">if</span> (element-&gt;next = <span class="hljs-literal">NULL</span>) 
            list-&gt;tail = element;
    }
    
    <span class="hljs-comment">/* Free the storage allocated by the abstract datatype. */</span> 
    <span class="hljs-built_in">free</span>(old_element);
    
    <span class="hljs-comment">/*Adjust the size of the list to account for the removed element.*/</span> 
    <span class="hljs-number">1</span>istâ€”&gt;size--; 
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; 
}
</code></pre></div>

<h5><span id="shuang-xiang-lian-biao">åŒå‘é“¾è¡¨</span><a href="#shuang-xiang-lian-biao" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span> *prev;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span> *next;
} DListEImt;</code></pre></div>

<h6><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/*dlist h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> DLIST_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> DLIST_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-comment">/* Define a structure for doubly-linked list elements. */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span> *prev;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DListEImt_</span> *next;
} DListEImt;

<span class="hljs-comment">/*Define structure for doubly-linked lists. */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dlist_</span>
{
    <span class="hljs-type">int</span> size;
    <span class="hljs-built_in">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2);
    <span class="hljs-built_in">void</span> (*destroy)(<span class="hljs-type">void</span> *data);
    DListEImt *head;
    DListEImt *tail;
}DList;


<span class="hljs-comment">/* Public Interface */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dlist_init</span><span class="hljs-params">(DList *list, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dlist_destroy</span><span class="hljs-params">(DList *list)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_ins_next</span><span class="hljs-params">(DList *list, DListEImt *element <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_ins_prev</span><span class="hljs-params">(DList *list, DListEImt *element, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_remove</span><span class="hljs-params">(DList *list, DListEImt *element, <span class="hljs-type">void</span> **data)</span></span>;
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_size(list)	((list)-&gt;size)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_tail(list)	((list)-&gt;tail)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_is_head(element)	((element)-&gt;prev == NULL ? 1: 0)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_is_tail(element)	((element)-&gt;next == NULL ? 1: 0)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_data(element)	((element)-&gt;data)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> diist_next(element)	((element)-&gt;next)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> dlist_prev(element)	(element )-&gt;prev)</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/*d]ä¸»st.C*/</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> dlist . h</span>
<span class="hljs-comment">/* dlist init */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dlist_init</span><span class="hljs-params">(DList *list, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Initialize the list. */</span>
    list-&gt;size = <span class="hljs-number">0</span>;
    list-&gt;destory = destroy;
    list-&gt;head = <span class="hljs-literal">NULL</span>;
    list-&gt;tail = <span class="hljs-literal">NULL</span>;
}

<span class="hljs-comment">/* dlist_destory */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dlist_destroy</span> <span class="hljs-params">(DList *list)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">void</span> *data
    <span class="hljs-comment">/* Remove each element. */</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">dlist_size</span>(list) &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dlist_remove</span>(list, <span class="hljs-built_in">dlist_tail</span>(list), (<span class="hljs-type">void</span>**)adata)==<span class="hljs-number">0</span>
           &amp;&amp; list-&gt;destory != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Call a user-defined function to free dynamically allocated data. */</span>
            list-&gt;<span class="hljs-built_in">destroy</span>(data);
        }
    }
        
    <span class="hljs-comment">/* No operations are allowed now, but clear the structure as a precaution. */</span>
    <span class="hljs-built_in">memset</span>(list, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(DList));
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_ins_next</span><span class="hljs-params">(DList *list, DListElmt *element, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    DListElmt *new_element;
    
    <span class="hljs-comment">/* Do not allow a NUll element unless the list is empty. */</span>
    <span class="hljs-keyword">if</span> (element == <span class="hljs-literal">NULL</span> &amp;&amp; <span class="hljs-built_in">dlist_size</span>(list) != <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/* Allocate storage for the element. */</span>
    <span class="hljs-keyword">if</span> ((new_element = (DListElmt *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(DListElmt)))== <span class="hljs-literal">NULL</span>)
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>:
    <span class="hljs-comment">/* Insert the new_element into the list. */</span>
    new_element-&gt;data = (<span class="hljs-type">void</span> *)data;
    
    <span class="hljs-keyword">if</span> (dlist <span class="hljs-built_in">size</span>(list) == <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Handle insertion when the list is empty. */</span>
        list-&gt;head = new_element;
        list-&gt;head-&gt;prev = <span class="hljs-literal">NULL</span>;
        list-&gt;head-&gt;next = <span class="hljs-literal">NULL</span>;
        list-&gt;tail = new_element;
    }
    <span class="hljs-keyword">else</span>{
         <span class="hljs-comment">/* Handle insertion when the list is not empty. */</span>
        new_element-&gt;next = element-&gt;next;
        new_element-&gt;prev = element;
        <span class="hljs-keyword">if</span>(element-&gt;next == <span class="hljs-literal">NULL</span>)
            list-&gt;tail = new_element;
        <span class="hljs-keyword">else</span>
            element-&gt;next-&gt;prev = new_element;
        element-&gt;next = new_element;
    }
   
    <span class="hljs-comment">/* Adjust the size of the list to account for the inserted element. */</span>
    list-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* dlist ins_ prev */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_ins_prev</span><span class="hljs-params">(DList *list, DListElmt *element, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    DListElmt *new_element;
        
	<span class="hljs-comment">/* Do not allow a NULL element unless the list is empty. */</span>
    <span class="hljs-keyword">if</span> (element == <span class="hljs-literal">NULL</span> &amp;&amp; <span class="hljs-built_in">dlist_size</span>(list) != <span class="hljs-number">0</span>)
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/* Allocate storage to be managed by the abstract datatype. */</span>
    <span class="hljs-keyword">if</span>(new_element = (DListElmt *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(DListElmt))) == <span class="hljs-literal">NULL</span>)
    	<span class="hljs-keyword">return</span> - <span class="hljs-number">1</span>;
    
    <span class="hljs-comment">/* Insert the new_element into the list */</span>
    new_element-&gt;data =(<span class="hljs-type">void</span> *)data;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dlist_size</span>(list)== <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Handle insertion when the list is empty. */</span>
        list-&gt;head = new_element;
        list-&gt;head-&gt;prev = <span class="hljs-literal">NULL</span>;
        list-&gt;head-&gt;next = <span class="hljs-literal">NULL</span>;
        list-&gt;tail = new_element;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Handle inserton when the list is not empty. */</span>
        new_element = element;
        new_element-&gt;prev = element-&gt;prev;
        
        <span class="hljs-keyword">if</span> (element-&gt;prev == <span class="hljs-literal">NULL</span>)
        	list-&gt;head = new_element;
        <span class="hljs-keyword">else</span>
        	element-&gt;prev-&gt;next = new_element;
        element-&gt;prev = new_element;
    }
    
    <span class="hljs-comment">/* Adjust the size of the list to account for the new_element. */</span>
    list-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* d1ist_remove */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dlist_remove</span><span class="hljs-params">(DList *list, DListElmt. *element, <span class="hljs-type">void</span> s*data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Do not allow a NULL element or removal from an empty list. */</span>
    <span class="hljs-keyword">if</span> (element == <span class="hljs-literal">NULL</span> || <span class="hljs-built_in">dlist_size</span>(list) == <span class="hljs-number">0</span>)
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>:
    <span class="hljs-comment">/* remove the element from the list. */</span>
    *data s element -&gt;data;
        
    <span class="hljs-keyword">if</span> (element == list-&gt;head)
    {
        <span class="hljs-comment">/* Handle removal from the head of the list. */</span>
    	list-&gt;head = element-&gt;next;
        
        <span class="hljs-keyword">if</span> (list-&gt;head == <span class="hljs-literal">NULL</span>)
			list-&gt;tail = <span class="hljs-literal">NULL</span>;
        <span class="hljs-keyword">else</span>
        	element-&gt;next-&gt;prev = <span class="hljs-literal">NULL</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Handle removal from other than the head of the list. */</span>
        element-&gt;prev-&gt;next = element-&gt;next;

        <span class="hljs-keyword">if</span> (element-&gt;next == <span class="hljs-literal">NULL</span>)
            list-&gt;tail = elenent-&gt;prev;
        <span class="hljs-keyword">else</span>
            element-&gt;next-&gt;prev = element-&gt;prev;
    }

    <span class="hljs-comment">/* Free the storage allocated by the abstract datatype. */</span>
    <span class="hljs-built_in">free</span>(element);
    
    <span class="hljs-comment">/* Adjust the size of the list to account for the removed element */</span>
    list-&gt;size--;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

<h5><span id="xun-huan-lian-biao">å¾ªç¯é“¾è¡¨</span><a href="#xun-huan-lian-biao" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ClistElmt_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ClistElmt_</span> *next;
}ClistElmt;</code></pre></div>

<h6><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* clist .h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> CLIST_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLIST_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-comment">/* Define a structure for circular list elements .*/</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CListElmt</span> 
{
    <span class="hljs-type">void</span> * data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CListElmt</span> * next;
} CListElmt;

<span class="hljs-comment">/* Definea structure for circular lists .*/</span> 
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CList_</span>
{
    <span class="hljs-type">int</span> size;
    <span class="hljs-built_in">int</span> (*match)(constvoid * key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> * key2);
    <span class="hljs-built_in">void</span> (*destroy)(<span class="hljs-type">void</span>* data);
    CListElmt *head;
}CList;

<span class="hljs-comment">/* Public Interface */</span> 
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clist_init</span><span class="hljs-params">(CList* list,<span class="hljs-type">void</span> ( *destroy)( <span class="hljs-type">void</span>* data))</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clist_destroy</span><span class="hljs-params">(CList* list)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">clist_ins_next</span> <span class="hljs-params">(CList* list,CListElmt * element,<span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">clist_rem_next</span> <span class="hljs-params">(CList* list,CListElmt * element,<span class="hljs-type">void</span> **data)</span></span>;
<span class="hljs-meta">#defineclist _size(list)((list)-&gt;size)</span>
<span class="hljs-meta">#defineclist head (list)(()-&gt;head)</span>
<span class="hljs-meta">#defineclist data (element)((element)-&gt;data)</span>
<span class="hljs-meta">#defineclist _next(element)((element)-&gt;next)</span>

<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* clist .c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h &gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"clist.h"</span></span>

<span class="hljs-comment">/* clist init */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clist_init</span><span class="hljs-params">(CList* list,<span class="hljs-type">void</span> ( *destroy)( <span class="hljs-type">void</span>* data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Initialize the list .*/</span> 
    list-&gt;size = <span class="hljs-number">0</span>;
    list-&gt;destroy = destroy ;
    list-&gt;head = <span class="hljs-literal">NULL</span>;
}

<span class="hljs-comment">/* clist destroy */</span> 
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clist_destroy</span> <span class="hljs-params">(CList* list)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-comment">/* Remove each element .*/</span> 
    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">clist_size</span>(list) &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">clist_remnext</span> (list,list-&gt;head, (<span class="hljs-type">void</span> **)&amp;data)== <span class="hljs-number">0</span>
            &amp;&amp; list-&gt;destroy != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Call a user-defined function to free dynamically allocated data .*/</span> 
            list-&gt;<span class="hljs-built_in">destroy</span>(data);
        }
    }
        
    <span class="hljs-comment">/* No operations are allowed now ,but clear the structure as a precaution .*/</span>
	<span class="hljs-built_in">memset</span> (list, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(CList));
}
  
    <span class="hljs-comment">/* clist ins next */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">clist_insnext</span> <span class="hljs-params">(CList* list,CListElmt * element,<span class="hljs-type">const</span> <span class="hljs-type">void</span> * data)</span></span>
<span class="hljs-function"></span>{
    CListElmt* new_element;
    <span class="hljs-comment">/*Allocate storage for the element .*/</span>
    <span class="hljs-keyword">if</span> ((new_element = (CListElmt* )<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(CListElmt))) == <span class="hljs-literal">NULL</span>)
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/* Insert the element into the list .*/</span> 
    new_element-&gt;data = (<span class="hljs-type">void</span> *)data;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">clist_size</span>(list) == <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Handle insertion when the list empty .*/</span>
        new_element-&gt;next = new_element;
        list-&gt;head = new_element;
    }  
    <span class="hljs-keyword">else</span> 
    {
        <span class="hljs-comment">/* Handle insertion when the list is not empty .*/</span>
        new_element-&gt;next = element-&gt;next;
        element-&gt;next = new_element;
    }
    <span class="hljs-comment">/* Adjust the size of the list to account for the inserted element .*/</span> 
    list-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> ;
}


<span class="hljs-comment">/* clist_rem_next */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">clist_rem_next</span><span class="hljs-params">(CList* list, CListElmt *element,<span class="hljs-type">void</span> **data)</span></span>
<span class="hljs-function"></span>{
    CListElmt * old_element;
    
    <span class="hljs-comment">/* Do not allow removal from an empty list . */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">clist_size</span>(list) == <span class="hljs-number">0</span>)
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/* Remove the element from the list . */</span>
    *data = element-&gt;next-&gt;data;
    <span class="hljs-keyword">if</span> (element-&gt;next == element)
    {
        <span class="hljs-comment">/* Handle removing the last element . */</span>
        old_element = element-&gt;next;
        list-&gt;headNULL;
    }    
    <span class="hljs-keyword">else</span> 
    {
        <span class="hljs-comment">/* Handle removing other than the last element . */</span>
        old_element = element-&gt;next;
        element-&gt;next = element-&gt;next-&gt;next;
        <span class="hljs-keyword">if</span> (old_element == <span class="hljs-built_in">clist_head</span>(list))
        	list-&gt;head = old_element-&gt;next;
    }
        
    <span class="hljs-comment">/* Free the storage allocated by the abstract datatype . */</span>
    <span class="hljs-built_in">free</span>(old_element);
    
    <span class="hljs-comment">/* Adjust the size of the list to account for the removed element . */</span>
    <span class="hljs-number">1</span>ist-&gt;size--;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre></div>

<h4><span id="2-zhan-he-dui-lie">2.æ ˆå’Œé˜Ÿåˆ—</span><a href="#2-zhan-he-dui-lie" class="header-anchor">#</a></h4><p>æ ˆå’Œé˜Ÿåˆ—æ˜¯å¦ä¸€ç§æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚</p>
<p>ç”¨äºæ£€ç´¢æ•°æ®çš„å¸¸ç”¨æ•°æ®ç»“æ„ç§°ä¸ºæ ˆ,æ ˆçš„æ£€ç´¢é¡ºåºå’Œå­˜å‚¨å…ƒç´ ç›¸å</p>
<blockquote>
<p>æ ˆ: æŒ‰ç…§åè¿›å…ˆå‡ºçš„é¡ºåºå­˜å‚¨å’Œæ£€ç´¢æ•°æ®çš„é«˜æ•ˆæ•°æ®ç»“æ„, å®ƒæ£€ç´¢æ•°æ®çš„é¡ºåºå’Œå­˜å‚¨æ•°æ®ç›¸åã€‚</p>
</blockquote>
<blockquote>
<p>é˜Ÿåˆ—ï¼šæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºå­˜å‚¨å’Œæ£€ç´¢æ•°æ®çš„é«˜æ•ˆæ•°æ®ç»“æ„, å®ƒæŒ‰ç…§å­˜å‚¨å…ƒç´ çš„é¡ºåºæ£€ç´¢å…ƒç´ ã€‚</p>
</blockquote>
<h5><span id="zhan-li-zi">æ ˆä¾‹å­</span><a href="#zhan-li-zi" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* stack .h*/</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> STACK_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> STACK_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>
<span class="hljs-comment">/* Implement stacks as linked lists .*/</span> 
<span class="hljs-keyword">typedef</span> List Stack;
<span class="hljs-comment">/*Public Interface */</span> 
<span class="hljs-meta">#<span class="hljs-keyword">define</span> stack_init list_init </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> stack_destroy list_destroy</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">stack_push</span><span class="hljs-params">(Stack* stack,<span class="hljs-type">const</span> <span class="hljs-type">void</span> * data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">stack_pop</span><span class="hljs-params">(Stack* stack,<span class="hljs-type">void</span> ** data)</span></span>;
<span class="hljs-meta">#<span class="hljs-keyword">define</span> stack_peek(stack)	((stack)-&gt;head == NULL ? NULL : (stack)-&gt;head-&gt;data)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> stack_size list_size </span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* Stack.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Stack.h"</span></span>

<span class="hljs-comment">/* stack_push */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">stack_push</span><span class="hljs-params">(Stack* stack,<span class="hljs-type">const</span> <span class="hljs-type">void</span> * data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* push the data onto the stack. */</span>
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">list_ins_next</span>(stack, <span class="hljs-literal">NULL</span>, data);
}

<span class="hljs-comment">/* stack_pop */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">stack_pop</span><span class="hljs-params">(Stack* stack,<span class="hljs-type">void</span> ** data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Pop the data off the stack. */</span>
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">list_rem_next</span>(stack, <span class="hljs-literal">NULL</span>, data);
}</code></pre></div>

<h5><span id="dui-lie-li-zi">é˜Ÿåˆ—ä¾‹å­</span><a href="#dui-lie-li-zi" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* queue . h */</span> 
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> QUEUE_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> QUEUE_H </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span> </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span> </span>
<span class="hljs-comment">/* Implement queues as linked lists . */</span> 
<span class="hljs-keyword">typedef</span> List Queue ; 
<span class="hljs-comment">/* Public Interface */</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> queue_init list_init </span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> queue_destroy list_destroy </span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">queue_enqueue</span> <span class="hljs-params">(Queue * queue, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* data )</span></span>; 
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">queue_dequeue</span> <span class="hljs-params">(Queue * queue, <span class="hljs-type">void</span> **data)</span></span>;
<span class="hljs-meta">#<span class="hljs-keyword">define</span> queue_peek(queue()(queue)-&gt;head == NULL ? NULL : (queue)-&gt;head-&gt;data)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> queue_size list_size </span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span> </span></code></pre></div>



<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* queue.c */</span> 
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib&gt;</span>h &gt; </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span> </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"queue.h"</span> </span>

<span class="hljs-comment">/* queue_enqueue */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">queue_enqueue</span> <span class="hljs-params">(Queue* queue, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* data)</span> </span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Enqueue the data . */</span> 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list_ins_next</span>(queue, <span class="hljs-built_in">list_tail</span>(queue), data); 
}
	
<span class="hljs-comment">/* queue_dequeue */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">queue_dequeue</span><span class="hljs-params">(Queue* queue, <span class="hljs-type">void</span>** data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Dequeue the data . */</span> 
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list_rem_next</span>(queue, <span class="hljs-literal">NULL</span>, data); 
}</code></pre></div>

<h5><span id="dui-lie-shi-li-shi-jian-chu-li">é˜Ÿåˆ—ç¤ºä¾‹ï¼šäº‹ä»¶å¤„ç†</span><a href="#dui-lie-shi-li-shi-jian-chu-li" class="header-anchor">#</a></h5><p>éµå¾ªå®æ—¶äº‹ä»¶å‘ç”Ÿçš„é¡ºåºæ‰§è¡Œã€‚</p>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* events.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"event.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"events.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"queue.h"</span></span>

<span class="hljs-comment">/* receive_event */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">receive_event</span><span class="hljs-params">(Queue *events, <span class="hljs-type">const</span> Event *event)</span></span>
<span class="hljs-function"></span>{
    Event* new_event;
    
    <span class="hljs-comment">/* Allocate space for the event. */</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-literal">NULL</span> == (new_event = (Event*)(<span class="hljs-built_in">sizeof</span>(Event))))
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/* Make a copy of the event and enqueue it. */</span>
	<span class="hljs-built_in">memcpy</span>(new_event, event, <span class="hljs-built_in">sizeof</span>(Event));
    
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">queue_enqueue</span>(events, new_event) != <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* process_event */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">process_event</span><span class="hljs-params">(Queue *events, <span class="hljs-type">int</span> (*dispatch)(Event* event))</span></span>
<span class="hljs-function"></span>{
    Event* event;
    
    <span class="hljs-keyword">if</span>(<span class="hljs-number">0</span> == <span class="hljs-built_in">queue_size</span>(events))
        <span class="hljs-comment">/* Return that there are no events to dispatch. */</span>
		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">if</span>(<span class="hljs-number">0</span> != <span class="hljs-built_in">queue_deququq</span>(events, (<span class="hljs-type">void</span> **)&amp;event))
            <span class="hljs-comment">/* Return that an event could not be retrived. */</span>
    		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-comment">/* Call a user-defined fintion to dispatch the event. */</span>
        	<span class="hljs-built_in">dispatch</span>(event);
        	<span class="hljs-built_in">free</span>(event);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</code></pre></div>

<h4><span id="3-ji-he">3.é›†åˆ</span><a href="#3-ji-he" class="header-anchor">#</a></h4><p>é›†åˆå®šä¹‰ï¼šé›†åˆæ˜¯ç›¸å…³è”æˆå‘˜çš„æ— åºç»„åˆ,ä¸”æ¯ä¸ªæˆå‘˜åœ¨é›†åˆä¸­åªå‡ºç°ä¸€æ¬¡</p>
<h5><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* set.h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> SET_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>

<span class="hljs-comment">/* Implement sets as linked lists. */</span>
<span class="hljs-keyword">typedef</span> List Set;

<span class="hljs-comment">/* Public Interface */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_init</span><span class="hljs-params">(Set *set, <span class="hljs-type">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *keyl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destory)(<span class="hljs-type">void</span> *data))</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_insert</span><span class="hljs-params">(Set *set, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_remcve</span><span class="hljs-params">(Set *set, <span class="hljs-type">void</span> **data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_union</span><span class="hljs-params">(Set *setu, <span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_intersection</span><span class="hljs-params">(Set*seti, <span class="hljs-type">const</span> Set *seta, <span class="hljs-type">const</span> Set *set2)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_difference</span><span class="hljs-params">(Set *setd, <span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_memeber</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *set, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_subset</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_equal</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>;

<span class="hljs-meta">#<span class="hljs-keyword">define</span> set_size(set()(set) osize)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> set_destroy list_destroy</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* set.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"set.h"</span></span>

<span class="hljs-comment">/* set_init */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_init</span><span class="hljs-params">(Set *set, <span class="hljs-type">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *keyl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destory)(<span class="hljs-type">void</span> *data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Initialize the set. */</span>
    <span class="hljs-built_in">list_init</span>(set, destory);
    set-&gt;match = match;
}

<span class="hljs-comment">/* set_insert */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_insert</span><span class="hljs-params">(Set *set, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Do not allow the insertion of duplicates. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">set_in_number</span>(set, data))
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;

    <span class="hljs-comment">/* Insert the data. */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list_ins_tail</span>(set, <span class="hljs-built_in">list_tail</span>(set), data);
}

<span class="hljs-comment">/* set_remove. */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_remove</span><span class="hljs-params">(Set* set, <span class="hljs-type">void</span> **data)</span></span>
<span class="hljs-function"></span>{
    ListE1mt *member, *prev;
    
    <span class="hljs-comment">/* Find the member to remove.*/</span>
    prev = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(set); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))
    {
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">list_data</span><span class="hljs-params">(member)</span>))</span>
<span class="hljs-function">            <span class="hljs-keyword">break</span></span>;
        prev = member;
    }
       
    <span class="hljs-comment">/* Return if the member was not found.*/</span>
    <span class="hljs-keyword">if</span> (member == <span class="hljs-literal">NULL</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> ;
    
    <span class="hljs-comment">/* Remove the member. */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list_rem_next</span>(set, prev, data);
}

<span class="hljs-comment">/* set_union */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_unicn</span><span class="hljs-params">(Set *setu, <span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>
<span class="hljs-function"></span>{
    ListE1mt *member;
    <span class="hljs-type">void</span> *data;
    
    <span class="hljs-comment">/* Initialize the set for the union. */</span>
    <span class="hljs-built_in">set_init</span>(setu, set1-&gt;match, <span class="hljs-literal">NULL</span>);
    
    <span class="hljs-comment">/* Insert the members of the first set. */</span>
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(setl); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))   
	{
        data = <span class="hljs-built_in">list_data</span>(member);
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_ins_next</span>(setu, <span class="hljs-built_in">list_tail</span>(setu), data) != <span class="hljs-number">0</span>) 
        {
            <span class="hljs-built_in">set_destroy</span>(setu);
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
	}
    <span class="hljs-comment">/* Insert the members of the second set. */</span>
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(set2); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member)) 
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">set_is_member</span>(setl, <span class="hljs-built_in">list_data</span>(member)))
        {
             <span class="hljs-comment">/* Do not allow the insertion of duplicates. */</span> 				
            <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            data = <span class="hljs-built_in">list_data</span>(member);
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_ins_next</span>(setu, <span class="hljs-built_in">list_tail</span>(setu), data) != <span class="hljs-number">0</span>)
            {
                <span class="hljs-built_in">set_destroy</span>(setu);
                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
    
<span class="hljs-comment">/* set_intersection */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_intersection</span><span class="hljs-params">(Set *seti, <span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>
<span class="hljs-function"></span>{ 
    ListElmt *member;
    <span class="hljs-type">void</span> *data;
    
    <span class="hljs-comment">/* Initialize the set for the intersection. */</span> 
    <span class="hljs-built_in">set_init</span>(set1, set1-&gt;match, <span class="hljs-literal">NULL</span>);
    
    <span class="hljs-comment">/* Insert the members present in both sets- */</span> 
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(set1); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">set_is_member</span>(set2, <span class="hljs-built_in">list_data</span>(member)))
        {
            data = <span class="hljs-built_in">list_data</span>(member);
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_ins_next</span>(seti, <span class="hljs-built_in">list_tail</span>(seti), data) != <span class="hljs-number">0</span>)
                {
                    <span class="hljs-built_in">set_destroy</span>(seti);
                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
                }
		}
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* set_difference */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_difference</span><span class="hljs-params">(Set *setd, <span class="hljs-type">const</span> Set *seti, <span class="hljs-type">const</span> Set *set2)</span></span>
<span class="hljs-function"></span>{ 
    ListElmt *member;
    <span class="hljs-type">void</span> *data;

    <span class="hljs-comment">/* Initialize the set for the difference. */</span>
    $<span class="hljs-built_in">et_init</span>(setd, set1-Mnatch, <span class="hljs-literal">NULL</span>);

    <span class="hljs-comment">/* Insert the members from setl not in set2 */</span>
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(setl); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))
    { 
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">lset_is_member</span>(set2, <span class="hljs-built_in">list_data</span>(member)))
        { 
             data = <span class="hljs-built_in">list_data</span>(member);
             <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list_ins_next</span>(setd, <span class="hljs-built_in">list_tail</span>(setd), data) != <span class="hljs-number">0</span>)
             { 
                <span class="hljs-built_in">set_destroy</span>(setd);
                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
             }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}


<span class="hljs-comment">/* set_ls_member */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_member</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *set <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{ 
    ListElmt *member;
    <span class="hljs-comment">/* Determine if the data is a member of the set. */</span> 
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(set); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))
    {
        <span class="hljs-keyword">if</span> (set-&gt;<span class="hljs-built_in">match</span>(dataj <span class="hljs-built_in">listdata</span>(member))) 
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">return</span> o;
}

<span class="hljs-comment">/* set_is_subset */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_subset</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>
<span class="hljs-function"></span>{
    ListElmt	*åŠ ember;
    <span class="hljs-comment">/* Do a quick test to rule out some cases. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">set_size</span>(setl) &gt; <span class="hljs-built_in">set_size</span>(set2)) 
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">/* Determine if setl is a subset of set2, */</span>
    <span class="hljs-keyword">for</span> (member = <span class="hljs-built_in">list_head</span>(set1); member != <span class="hljs-literal">NULL</span>; member = <span class="hljs-built_in">list_next</span>(member))
    {
        <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">list_is_member</span>(set2, <span class="hljs-built_in">list_data</span>(member)))
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    	
	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

<span class="hljs-comment">/* setis_equal */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">set_is_equal</span><span class="hljs-params">(<span class="hljs-type">const</span> Set *setl, <span class="hljs-type">const</span> Set *set2)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Do a quick test to rule out some cases. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">set_size</span>(setl) != <span class="hljs-built_in">set_size</span>(set2))
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-comment">/* Sets of the same size are equal if they are subsets, */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">set_is_subset</span>(set1, set2);
}</code></pre></div>

<h5><span id="set-shi-li-ji-he-fu-gai">Setç¤ºä¾‹ï¼šé›†åˆè¦†ç›–</span><a href="#set-shi-li-ji-he-fu-gai" class="header-anchor">#</a></h5><p>é›†åˆè¦†ç›–æ˜¯ä¸€ç§ä¼˜åŒ–æ±‚è§£é—®é¢˜, å¯¹å¾ˆå¤šç»„åˆæ•°å­¦å’Œèµ„æºé€‰æ‹©é—®é¢˜ç»™å‡ºäº†æ¼‚äº®çš„æŠ½è±¡æ¨¡å‹</p>
<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* cover,c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"cover.hâ€</span></span>
<span class="hljs-string"><span class="hljs-meta">#include "</span>list<span class="hljs-string">'h"</span></span>
<span class="hljs-string"><span class="hljs-meta">#include "set.h"</span></span>
<span class="hljs-string"><span class="hljs-meta">/* cover */</span></span>
<span class="hljs-string"><span class="hljs-meta">int cover(Set *members&gt; Set ç‡subsets, Set *covering) </span></span>
<span class="hljs-string"><span class="hljs-meta">{</span></span>
<span class="hljs-string"><span class="hljs-meta">   Set intersection;</span></span>
<span class="hljs-string"><span class="hljs-meta">   KSet *subset;</span></span>
<span class="hljs-string"><span class="hljs-meta">   ListElflit "member,</span></span>
<span class="hljs-string"><span class="hljs-meta">              *max_member;</span></span>
<span class="hljs-string"><span class="hljs-meta">   void *data;</span></span>
<span class="hljs-string"><span class="hljs-meta">   int max_size;</span></span>
<span class="hljs-string"><span class="hljs-meta">    </span></span>
<span class="hljs-string"><span class="hljs-meta">   /* Initialize the coveringÂ» */</span></span>
<span class="hljs-string"><span class="hljs-meta">   set_init(covering, subsets-&gt;match, NULL);</span></span>
<span class="hljs-string"><span class="hljs-meta">    </span></span>
<span class="hljs-string"><span class="hljs-meta">   /* Continue while there are noncovered members and candidate subsets. */ </span></span>
<span class="hljs-string"><span class="hljs-meta">    while (set_size(members) &gt; 0 &amp;&amp; set_size(subset) &gt; 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">    {</span></span>
<span class="hljs-string"><span class="hljs-meta">       </span></span>
<span class="hljs-string"><span class="hljs-meta">        /* Find the subset that covers the most members.*/</span></span>
<span class="hljs-string"><span class="hljs-meta">        max_size = 0;</span></span>
<span class="hljs-string"><span class="hljs-meta">        for (member = list_head(subsets); member != NULL;</span></span>
<span class="hljs-string"><span class="hljs-meta">                    member = list_next(member))</span></span>
<span class="hljs-string"><span class="hljs-meta">        { </span></span>
<span class="hljs-string"><span class="hljs-meta">           if (set-intersectionC&amp;intersection, &amp;((KSet *)list_data(member))-&gt;set, members) != 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">           {</span></span>
<span class="hljs-string"><span class="hljs-meta">              return -1;</span></span>
<span class="hljs-string"><span class="hljs-meta">           }</span></span>
<span class="hljs-string"><span class="hljs-meta">           if (set_size(&amp;inteisection) &gt; max_size)</span></span>
<span class="hljs-string"><span class="hljs-meta">           {</span></span>
<span class="hljs-string"><span class="hljs-meta">              max_member = member;</span></span>
<span class="hljs-string"><span class="hljs-meta">              max_size = set_size(&amp;intersection);</span></span>
<span class="hljs-string"><span class="hljs-meta">           }</span></span>
<span class="hljs-string"><span class="hljs-meta">           set_destroy(&amp;intersection);</span></span>
<span class="hljs-string"><span class="hljs-meta">        }</span></span>
<span class="hljs-string"><span class="hljs-meta">        /* A covering is not possible if there was no intersectionâ™¦ */</span></span>
<span class="hljs-string"><span class="hljs-meta">        if (max_size == 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">           return 1;</span></span>
<span class="hljs-string"><span class="hljs-meta"></span></span>
<span class="hljs-string"><span class="hljs-meta">        /* Insert the selected subset into the coveringÂ» */</span></span>
<span class="hljs-string"><span class="hljs-meta">        subset = (KSet *)list_data(max_nember);</span></span>
<span class="hljs-string"><span class="hljs-meta"></span></span>
<span class="hljs-string"><span class="hljs-meta">        if (set_insert(coverings, subset) != 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">           return -1;</span></span>
<span class="hljs-string"><span class="hljs-meta"></span></span>
<span class="hljs-string"><span class="hljs-meta">        /* Remove each covered member -from the set of noncovered members. */</span></span>
<span class="hljs-string"><span class="hljs-meta">        for (member = list_head(&amp;((KSet *)list_data(max_member))-&gt;set);</span></span>
<span class="hljs-string"><span class="hljs-meta">              member != NULL; member = list_next(member)))</span></span>
<span class="hljs-string"><span class="hljs-meta">        {</span></span>
<span class="hljs-string"><span class="hljs-meta">            data = list_data(member);</span></span>
<span class="hljs-string"><span class="hljs-meta">            if(set_remove(members, (void*)&amp;data) == 0 &amp;&amp; members-&gt;destory != NULL)</span></span>
<span class="hljs-string"><span class="hljs-meta">                members-&gt;destory(data);</span></span>
<span class="hljs-string"><span class="hljs-meta">        }</span></span>
<span class="hljs-string"><span class="hljs-meta"></span></span>
<span class="hljs-string"><span class="hljs-meta">        /* Remove the subset from the set of cnadidate subsets. */</span></span>
<span class="hljs-string"><span class="hljs-meta">		if(set_remove(subsets, (void**)&amp;subset) != 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">    		return -1;</span></span>
<span class="hljs-string"><span class="hljs-meta">    }</span></span>
<span class="hljs-string"><span class="hljs-meta">    </span></span>
<span class="hljs-string"><span class="hljs-meta">    /* No covering is possible if there are still noncoverd member */</span></span>
<span class="hljs-string"><span class="hljs-meta">	if(set_size(members) &gt; 0)</span></span>
<span class="hljs-string"><span class="hljs-meta">        return -1;</span></span>
<span class="hljs-string"><span class="hljs-meta">    </span></span>
<span class="hljs-string"><span class="hljs-meta">    return 0;</span></span>
<span class="hljs-string"><span class="hljs-meta">}</span></span>
<span class="hljs-string"><span class="hljs-meta"></span></span></code></pre></div>

<h4><span id="4-ha-xi-biao">4.å“ˆå¸Œè¡¨</span><a href="#4-ha-xi-biao" class="header-anchor">#</a></h4><p>å“ˆå¸Œè¡¨æ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„æ£€ç´¢æ–¹æ³•ï¼š<code>æ•£åˆ—</code>ã€‚</p>
<p>ä»æ ¹æœ¬ä¸Šæ¥è¯´,ä¸€ä¸ªå“ˆå¸Œè¡¨åŒ…å«ä¸€ä¸ªæ•°ç»„, é€šè¿‡ç‰¹æ®Šçš„ç´¢å¼•å€¼(é”®)æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ,å“ˆå¸Œè¡¨çš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½ æ•°,åœ¨æ‰€æœ‰å¯èƒ½çš„é”®ä¸æ§½ä½ä¹‹é—´å»ºç«‹ä¸€å¼ æ˜ å°„è¡¨ã€‚å“ˆå¸Œå‡½æ•°æ¯æ¬¡æ¥å—ä¸€ä¸ªé”®å°†è¿”å›ä¸ é”®ç›¸å¯¹åº”çš„å“ˆå¸Œç¼–ç æˆ–å“ˆå¸Œå€¼ã€‚é”®çš„æ•°æ®ç±»å‹å¯èƒ½å¤šç§å¤šæ ·,ä½†å“ˆå¸Œå€¼çš„ç±»å‹åªèƒ½æ˜¯æ•´å‹ã€‚</p>
<h5><span id="lian-shi-ha-xi-biao">é“¾å¼å“ˆå¸Œè¡¨</span><a href="#lian-shi-ha-xi-biao" class="header-anchor">#</a></h5><p>å°†æ•°æ®å­˜å‚¨åœ¨ <code>æ¡¶</code> (bucket)ä¸­çš„å“ˆå¸Œè¡¨ã€‚æ¯ä¸ª â€œæ¡¶â€ éƒ½æ˜¯éƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨; ä¸”é“¾è¡¨çš„<br>å®¹é‡èƒ½å¤Ÿéšç€å†²çªçš„å¢åŠ è€Œå¢å¤§ã€‚</p>
<h6><span id="jie-jue-ha-xi-biao-chong-tu">è§£å†³å“ˆå¸Œè¡¨å†²çª</span><a href="#jie-jue-ha-xi-biao-chong-tu" class="header-anchor">#</a></h6><p>å¦‚æœæƒ³æ’å…¥è¡¨ä¸­çš„å…ƒç´ æ•°é‡è¿œå¤§äº<code>æ¡¶</code>æ•°é‡,é‚£ä¹ˆå³ä½¿æ˜¯åœ¨ä¸€ä¸ªå‡åŒ€æ•£åˆ—è¿‡çš„ç¨‹ä¸­,è¡¨çš„æ€§èƒ½ä¼šè¿…é€Ÿé™ä½ã€‚è¿™ç§æƒ…å†µä¸‹<code>æ¡¶</code>ä¼šå˜å¾—è¶Šæ¥è¶Šæ·±ã€‚å› æ­¤æˆ‘ä»¬è¦æ³¨æ„ä¸€ä¸ªå“ˆå¸Œè¡¨çš„<code>è´Ÿè½½å› å­</code>ã€‚</p>
<p>å…¶å®šä¹‰ä¸ºï¼š</p>
<p>â€‹                <code>Î± = n/m</code></p>
<p>â€‹                nä¸ºè¡¨ä¸­çš„å…ƒç´ æ•°é‡,mæ˜¯æ¡¶ä¸­çš„æ•°é‡(æ•°ç»„å…ƒç´ æ•°é‡)ã€‚</p>
<p>â€‹                åœ¨å‡åŒ€æ•£åˆ—æƒ…å†µä¸‹,é“¾å¼å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­å‘Šè¯‰æˆ‘ä»¬è¡¨ä¸­<code>æ¡¶</code>èƒ½è£…å…ƒç´ çš„æœ€å¤§å€¼</p>
<h6><span id="xuan-ze-ha-xi-han-shu">é€‰æ‹©å“ˆå¸Œå‡½æ•°</span><a href="#xuan-ze-ha-xi-han-shu" class="header-anchor">#</a></h6><p>  è¿™æ˜¯å“ˆå¸Œç®—æ³•çš„æ ¸å¿ƒé—®é¢˜ï¼šå°†é”®éšæœºåœ°åˆ†æ•£åˆ°è¡¨ä¸­,ä½¿å†²çªæœ€å°åŒ–ã€‚å› æ­¤,é€‰æ‹©ä¸€ ä¸ªèƒ½å¤Ÿå®ç°è¿™ä¸€è¿‡ç¨‹çš„å“ˆå¸Œå‡½æ•°å°¤ä¸ºé‡è¦ã€‚</p>
<p>å…¶å®šä¹‰ä¸ºï¼š</p>
<p>â€‹                <code>h(k) = x</code></p>
<p>â€‹                kä¸ºè¦è¢«æ˜ å°„çš„å€¼,h()ä¸ºå“ˆå¸Œå‡½æ•°,xä¸ºå“ˆå¸Œè¡¨çš„ä½ç½®</p>
<h6><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs cpp"><span class="hljs-comment">/* chtbl.h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> CHTBL_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CHTBL_H</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>

<span class="hljs-comment">/* Define a structure for chained hash table. */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CHTBL_</span>
{
    <span class="hljs-type">int</span> buckets;
    
    <span class="hljs-built_in">int</span> (*h)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key);
    <span class="hljs-built_in">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2);
    
    <span class="hljs-type">int</span> size;
    List* table;
} CHTbl;

<span class="hljs-comment">/* Public interface */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_init</span><span class="hljs-params">(CHTbl* htbl, <span class="hljs-type">int</span> buckets, <span class="hljs-type">int</span> (*h)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key), <span class="hljs-type">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destory)(<span class="hljs-type">void</span>* data))</span></span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">chtbl_destory</span><span class="hljs-params">(CHTbl *htbl)</span></span>;
  
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_insert</span><span class="hljs-params">(CHTbl *htbl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_remove</span><span class="hljs-params">(CHTbl *htbl, <span class="hljs-type">void</span> **data)</span></span>;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_lookup</span><span class="hljs-params">(CHTbl *htbl, <span class="hljs-type">void</span> **data)</span></span>;

<span class="hljs-meta">#<span class="hljs-keyword">define</span> chtbl_size(htbl()(chtbl)-&gt;size)</span>

<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/*chtbl.c*/</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"list.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"chtbl.h"</span></span>

<span class="hljs-comment">/* chtbl_init */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_init</span><span class="hljs-params">(CHTbl* htbl, <span class="hljs-type">int</span> buckets, <span class="hljs-type">int</span> (*h)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key), <span class="hljs-type">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destory)(<span class="hljs-type">void</span>* data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> i;
    
   	<span class="hljs-comment">/* Allocate space for the hash table.*/</span>
    <span class="hljs-keyword">if</span> ((htbl-&gt;table = (List *)<span class="hljs-built_in">malloc</span>(buckets * <span class="hljs-built_in">sizeof</span>(List))) == <span class="hljs-literal">NULL</span>) 	
    	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

    <span class="hljs-comment">/* Initialize the buckets. */</span>
    htbl-&gt;buckets = buckets;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; htbl-&gt;buckets; i++)
    	<span class="hljs-built_in">list_init</span>(&amp;htbl-&gt;table[i], destroy);
    
    <span class="hljs-comment">/* Encapsulate the functions. */</span>
    htbl-&gt;h = h
    htbl-&gt;match match;
    htbl-&gt;destroy = destroy;
    
    <span class="hljs-comment">/* Initialize the number of elements in the table. */</span>
    htbl-&gt;size = o;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* chtbl_destroy */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">chtbl_destory</span><span class="hljs-params">(CHTbl *htbl)</span></span>
<span class="hljs-function"></span>{   
    <span class="hljs-comment">/* Destroy each bucket. */</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = O; i &lt; htbl-&gt;buckets; i++)
    {
        <span class="hljs-built_in">list_destroy</span> (&amp;htbl -&gt;tableÃŸl) ;
    }
    	
    <span class="hljs-comment">/*Free the storage allocated for the hash table. */</span>
    <span class="hljs-built_in">free</span>(htbl-&gt;table);
    
    <span class="hljs-comment">/* No operations are allowed now, but clear the structure as a precaution.*/</span>
    <span class="hljs-built_in">memset</span>(htbl, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(CHTbl));

}

<span class="hljs-comment">/* chtbl insert */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_insert</span><span class="hljs-params">(CHTbl *htbl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">void</span>* temp;
    <span class="hljs-type">int</span> bucket,
        retval;
    <span class="hljs-comment">/* Do nothing if the data is already in the table. */</span>
    temp = (<span class="hljs-type">void</span> *)data;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">chtbl_lookup</span>(htbl, &amp;temp) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> ;
    
    <span class="hljs-comment">/* Hash the key. */</span>
    bucket = htbl-&gt;<span class="hljs-built_in">h</span>(data) % htbl-&gt;buckets;

    <span class="hljs-comment">/* Insert the data into the bucket. */</span>
	<span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == (retval = <span class="hljs-built_in">list_ins_next</span>(&amp;htbl-&gt;table[bucket], <span class="hljs-literal">NULL</span>, data)))
        htbl-&gt;size++;
    <span class="hljs-keyword">return</span> retval; 
}

<span class="hljs-comment">/* chtbl remove */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtb1_remove</span><span class="hljs-params">(CHTbl* htbl, <span class="hljs-type">void</span> **data)</span></span>
<span class="hljs-function"></span>{
    ListEImt*	element,
				*prev;
    <span class="hljs-type">int</span> 		bucket;
    
    <span class="hljs-comment">/* Hash the key. */</span>
	bucket = htbl-&gt;<span class="hljs-built_in">h</span>(*data) % htbl-&gt;buckets;
    
    <span class="hljs-comment">/* Search fcy the data in the bucket. */</span>
	prev = <span class="hljs-literal">NULL</span>;
    
    <span class="hljs-keyword">for</span> (element = <span class="hljs-built_in">list_head</span>(&amp;htbl-&gt;table[bucket]); element != <span class="hljs-literal">NULL</span>; element = <span class="hljs-built_in">list_next</span>(element))
    {
		<span class="hljs-keyword">if</span> (htbl-&gt;<span class="hljs-built_in">match</span>(*data, <span class="hljs-built_in">list_data</span>(element)))
        {
        	<span class="hljs-comment">/* Remove the data from the bucket. */</span>
            <span class="hljs-keyword">if</span>(<span class="hljs-number">0</span> == <span class="hljs-built_in">list_rem_next</span>(&amp;htbl-&gt;table[bucket], prev, data))
            {
                htbl-&gt;size--;
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
        	<span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
        prev = element;
    }
    
    <span class="hljs-comment">/* Return that the data was not found. */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}

<span class="hljs-comment">/* chtbl lookup */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">chtbl_lookup</span><span class="hljs-params">(CHTbl *htbl, <span class="hljs-type">void</span> **data)</span></span>
<span class="hljs-function"></span>{
    ListE1mt *element;
    <span class="hljs-type">int</span> 	bucket;
    
    <span class="hljs-comment">/* Hash the key.*/</span>
    bucket = htbl-&gt;<span class="hljs-built_in">h</span>(*data) % htbl-&gt;buckets;

    <span class="hljs-comment">/* Search for the data in the bucket.*/</span>
    <span class="hljs-keyword">for</span>(element = <span class="hljs-built_in">list_head</span>(&amp;htbl-&gt;table[bucket]); element = <span class="hljs-built_in">list_next</span>(eleemnt))
    {
        <span class="hljs-keyword">if</span>(htbl-&gt;<span class="hljs-built_in">match</span>(*data, <span class="hljs-built_in">list_data</span>(element)))
        {
            <span class="hljs-comment">/* Pass back the data from the table. */</span>
            *data = <span class="hljs-built_in">list_data</span>(element);
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/* Return that the was not found. */</span> 
	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}</code></pre></div>

<h5><span id="kai-di-zhi-ha-xi-biao">å¼€åœ°å€å“ˆå¸Œè¡¨</span><a href="#kai-di-zhi-ha-xi-biao" class="header-anchor">#</a></h5><p>  å°†æ•°æ®å­˜å‚¨åœ¨è¡¨æœ¬èº«ä¸­,è€Œä¸æ˜¯<code>æ¡¶</code>ä¸­çš„å“ˆå¸Œè¡¨ã€‚å®ƒé€šè¿‡å„ç§æ¢æŸ¥æ–¹æ³•æ¥é¿å…å†²çªé—®é¢˜ã€‚</p>
<h6><span id="li-zi">ä¾‹å­</span><a href="#li-zi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* ohtbl.h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> OHTBL_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> OHTBL_H</span>
<span class="hljs-meta">#incluge<span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-comment">/*Define astructure for open-addressed hash tables.*/</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">OHTbl_</span>
{
    <span class="hljs-type">int</span> 	positions; 
    <span class="hljs-function"><span class="hljs-type">void</span>* 	vacateds</span>
<span class="hljs-function"></span>
<span class="hljs-function">    <span class="hljs-title">int</span> <span class="hljs-params">(*h1)</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key)</span></span>;
    <span class="hljs-built_in">int</span> (*h2)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key);
    <span class="hljs-built_in">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key1,<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key2);
    <span class="hljs-built_in">int</span> (*destroy)(<span class="hljs-type">void</span>*data);

    <span class="hljs-type">int</span> sizes;
    <span class="hljs-type">void</span> **table;
}OHTbl;

<span class="hljs-comment">/*Public Interface*/</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_init</span><span class="hljs-params">(oHTbl*htbl,<span class="hljs-type">int</span> positions,<span class="hljs-type">int</span>{*hi)</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key)</span>,<span class="hljs-title">int</span> <span class="hljs-params">(*h2)</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key)</span>,<span class="hljs-title">int</span> <span class="hljs-params">(*match)</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>*key2)</span></span>;
<span class="hljs-built_in">void</span> (*destroy)(<span class="hljs-type">void</span>*data));
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ohtbl_destroy</span><span class="hljs-params">(OHTbl*htbl)</span></span>; 
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_insert</span><span class="hljs-params">(OHTbl*htbl,<span class="hljs-type">const</span> <span class="hljs-type">void</span>*data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_remove</span><span class="hljs-params">(OHTbl*htbl,<span class="hljs-type">void</span>**data)</span></span>; 
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_lookup</span><span class="hljs-params">(<span class="hljs-type">const</span> OHTbl *htbl,<span class="hljs-type">void</span> **data)</span></span>; 
<span class="hljs-meta">#<span class="hljs-keyword">define</span> ohtbl_size(htbl()(htbl)-&gt;size)</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* ohtbl.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"ohtbl.h"</span></span>

<span class="hljs-comment">/*Reserveasentinelmemoxy address for vacated elements.*/</span>
<span class="hljs-type">static</span> <span class="hljs-type">char</span> vacated;

<span class="hljs-comment">/*ohtb_linit*/</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtb_linit</span><span class="hljs-params">(oHTbl*htbl,<span class="hljs-type">int</span> positions,<span class="hljs-type">int</span> (*h1)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key),<span class="hljs-type">int</span> (*h2)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key),<span class="hljs-type">int</span> (*match)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key1,<span class="hljs-type">const</span> <span class="hljs-type">void</span>*key2),<span class="hljs-type">void</span> (*destroy)(voi*data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> i;
    
    <span class="hljs-comment">/*Allocate space for the hash table.*/</span>
    <span class="hljs-keyword">if</span> ((htbl-&gt;table= (<span class="hljs-type">void</span>**)<span class="hljs-built_in">malloc</span>(positions*<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">void</span>*)))==<span class="hljs-literal">NULL</span>)
		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    
    <span class="hljs-comment">/*Initializeeachpositionã€*/</span>
    htbl-&gt;positicns = pasitions;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt; htbl-&gt;positionsï¼›i++)
        htbl-&gt;table[i] = <span class="hljs-literal">NULL</span>;
    
    <span class="hljs-comment">/*Set the vacated member tothe sentinel memory address reserved for this,*/</span>
    htbl-&gt;vacated= &amp;vacated;
    
    <span class="hljs-comment">/*Encapsulate the functions.*/</span>
    htbl-&gt;h1 = h1;
    htbl-&gt;h2 = h2;
    htbl-match = match;
    htbl-&gt;destroy = destroy;
    
    <span class="hljs-comment">/*Initialize the number of elements in the table.*/</span>
    htbl-&gt;size = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/*ohtbl_destroy*/</span>
<span class="hljs-function">vold <span class="hljs-title">ohtbl_destroy</span><span class="hljs-params">(OHTbl*htbl)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> i;

    <span class="hljs-keyword">if</span>(htbl-&gt;destroy != <span class="hljs-literal">NULL</span>)
    {
		<span class="hljs-comment">/*Calla user-defined function to free dynamically allocated data.*/</span>
        <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; htbl-&gt;positions; i++)
        {
            <span class="hljs-keyword">if</span>(htbl-&gt;table[i] != <span class="hljs-literal">NULL</span> &amp;&amp; htbl-&gt;table[i] != htbl-&gt;vacated)
            	htbl-&gt;<span class="hljs-built_in">destroy</span>(htbl-&gt;table[i]); 
        }
    }
    
    <span class="hljs-comment">/*Free the storage allocated for the hash tableï¼Œ*/</span>
    <span class="hljs-built_in">free</span>(htbl-&gt;table);
    
    <span class="hljs-comment">/*No operations are allowed nowybut clear the structure asaprecautlon.*/</span>
	<span class="hljs-built_in">memset</span>(htbl, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(OHTbl));
}
               
<span class="hljs-comment">/*ohtblinsert*/</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtb_linsert</span><span class="hljs-params">(OHTbl*htblï¼Œconstvoid *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">void</span>* temp;
	<span class="hljs-type">int</span> position, i;
         
    <span class="hljs-comment">/*Do not exceed the number of positions in the table.*/</span>
    <span class="hljs-keyword">if</span> (htbl-&gt;size == htbl-&gt;positions)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

    <span class="hljs-comment">/*Do nothing ifthe data is already in the table.*/</span>
    temp= (<span class="hljs-type">void</span>*)data;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ohtbl_fookup</span>(htbl, &amp;temp) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    
    <span class="hljs-comment">/*Use double hashing to hash the key.*/</span>
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; htbl-&gt;positions; i++)
    {
        position = (htbl-&gt;<span class="hljs-built_in">h1</span>(data) + (i * htbl-&gt;<span class="hljs-built_in">h2</span>(data))) % htbl-&gt;positions;
        <span class="hljs-keyword">if</span> (htbl-&gt;table[position] == <span class="hljs-literal">NULL</span> || htbl-&gt;table[position] == htbl-&gt;vacated)
        {
            <span class="hljs-comment">/* Insert the data into the table.*/</span>
            htbl-&gt;table[position] = (<span class="hljs-type">void</span>*)data;
            htbl-&gt;size++;
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
        }
    }
    
    <span class="hljs-comment">/* Return that the hash funtions were selected incorrectly. */</span>
	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}
	
<span class="hljs-comment">/*ohtbl_remove */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_remove</span><span class="hljs-params">(OHTbl *htblï¼Œ<span class="hljs-type">void</span>**data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> position, i;
    
    <span class="hljs-comment">/*Use touble hashingtohashthekey.*/</span>
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; htbl-&gt;positions; i++) 
    {
        position = (htbl-&gt;<span class="hljs-built_in">h1</span>(*data) + (i * htbl-&gt;<span class="hljs-built_in">h2</span>(*data))) % htbl-&gt;positions;
    }

    <span class="hljs-keyword">if</span> (htbl-&gt;table[position] == <span class="hljs-literal">NULL</span>) 
    {
        <span class="hljs-comment">/* Returnthat the data was not foundï¼Œ*/</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>ï¼›
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (htbl-&gt;table[position]==htbl-&gt;vacated) 
    {
        <span class="hljs-comment">/*Seaxch beyond vacated pasitions.*/</span>
        <span class="hljs-keyword">continue</span>;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (htbl-&gt;<span class="hljs-built_in">match</span>(htbl-&gt;table[position],*data))
    {
        <span class="hljs-comment">/* Pass back the data from the tableï¼Œ*/</span>
        *data = htbl-&gt;table[position];
        htbl-&gt;table[positian] = htbl-&gt;vacated;
        htbl-&gt;size--;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; 
    }
    
    <span class="hljs-comment">/*Return that the data wasnot foundï¼Œ*/</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}

<span class="hljs-comment">/* ohtbI_lookup */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ohtbl_lcokup</span><span class="hljs-params">(<span class="hljs-type">const</span> OHTbl *htbl, <span class="hljs-type">void</span> **data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> positiong, i;

    <span class="hljs-comment">/* Use double hashing to hash the key.*/</span>
    <span class="hljs-keyword">for</span> (i = O; i &lt; htbl-&gt;positions; i++)
    {
        positicn = (htb1-&gt;<span class="hljs-built_in">hz</span>(*data) + (i * htb1-&gt;<span class="hljs-built_in">h2</span>(*data))) % htb1-&gt;positions;

        <span class="hljs-keyword">if</span> (htbl-&gt;table[position] == <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Return that the data was not found.*/</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(htbl-&gt;<span class="hljs-built_in">match</span>(htbl-&gt;table[position], *data))
        {
            <span class="hljs-comment">/* Pass back the data from the table. */</span>
            *data = htbl-&gt;table[positipon];
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/* Return that the data was not found. */</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}</code></pre></div>

<h4><span id="5-shu">5.æ ‘</span><a href="#5-shu" class="header-anchor">#</a></h4><h5><span id="shu-de-ding-yi">æ ‘çš„å®šä¹‰ï¼š</span><a href="#shu-de-ding-yi" class="header-anchor">#</a></h5><blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ ‘ç”±ç§°ä¹‹ä¸ºèŠ‚ç‚¹çš„å…ƒç´ æŒ‰ç…§å±‚æ¬¡ç»“æ„æ–¹å¼ç»„ç»‡è€Œæˆã€‚å±‚æ¬¡æœ€é¡¶ç«¯ä¸ºæ ¹(root)ã€‚ä¸æ ¹ç›¸è¿çš„ä¸ºå­èŠ‚ç‚¹ï¼Œé€šå¸¸å­èŠ‚ç‚¹ä¹Ÿæœ‰è‡ªå·±çš„å­èŠ‚ç‚¹ã€‚äºŒå‰æ ‘æ˜¯åˆ†æ”¯å› å­ä¸º2çš„æ ‘ã€‚äºŒå‰æœç´¢æ ‘æ˜¯ä¸“é—¨ç”¨äºæŸ¥æ‰¾çš„æ ‘ã€‚</p>
</blockquote>
<h5><span id="er-cha-shu">äºŒå‰æ ‘</span><a href="#er-cha-shu" class="header-anchor">#</a></h5><p><img src="https://gitee.com/txt1994/images/raw/master/img/Algorithmic_refinement/%E4%BA%8C%E5%8F%89%E6%A0%91.png" srcset="/img/loading.gif" lazyload></p>
<p>äºŒå‰æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«ä¸‰éƒ¨åˆ†ï¼šä¸€ä¸ª<code>æ•°æ®éƒ¨</code>å’Œä¸¤ä¸ªå·¦å³<code>æŒ‡é’ˆéƒ¨</code></p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/Algorithmic_refinement/%E8%8A%82%E7%82%B9%E4%BA%8C%E5%8F%89%E6%A0%91.png" srcset="/img/loading.gif" lazyload></p>
<h6><span id="shu-de-bian-li-suan-fa">æ ‘çš„éå†ç®—æ³•</span><a href="#shu-de-bian-li-suan-fa" class="header-anchor">#</a></h6><p>å…ˆåºéå†ï¼šæ ¹(root)ï¼Œå·¦ï¼Œå³</p>
<p>ä¸­å±‚éå†ï¼šå·¦ï¼Œæ ¹(root)ï¼Œå³</p>
<p>ååºéå†ï¼šå·¦ï¼Œå³ï¼Œæ ¹(root)</p>
<p>å±‚åºéå†ï¼šæ ¹(root), ä¸€å±‚ä¸€å±‚éå†åˆ°å¶å­</p>
<h5><span id="shu-de-ping-heng">æ ‘çš„å¹³è¡¡</span><a href="#shu-de-ping-heng" class="header-anchor">#</a></h5><p>æ ‘çš„å¹³è¡¡æ˜¯æŒ‡å¯¹äºç»™å®šæ•°é‡çš„èŠ‚ç‚¹ï¼Œä¿è¯æ ‘çš„é«˜åº¦å°½å¯èƒ½çŸ­çš„è¿‡ç¨‹ã€‚è¿™æ„å‘³ç€åœ¨ç»“ç‚¹åŠ å…¥ä¸‹ä¸€å±‚ä¹‹å‰å¿…é¡»ä¿è¯æœ¬å±‚ç»“ç‚¹æ»¡é¢ã€‚ä¹Ÿå°±æ˜¯è¯´æ ‘çš„å¶å­éƒ½åœ¨å€’æ•°ä¸¤å±‚ï¼Œä¸”å€’æ•°ç¬¬äºŒå±‚å¶å­æ˜¯æ»¡çš„ï¼Œåˆ™ç§°è¿™æ£µæ ‘æ˜¯å¹³è¡¡çš„ã€‚æœ€åä¸€å±‚å¶å­ç»“ç‚¹é å·¦ï¼Œåˆ™ç§°è¿™æ£µæ ‘æ˜¯å·¦å¹³è¡¡çš„ã€‚</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/Algorithmic_refinement/%E5%B7%A6%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91.png" srcset="/img/loading.gif" lazyload></p>
<h5><span id="er-cha-shu-de-jie-kou-ding-yi">äºŒå‰æ ‘çš„æ¥å£å®šä¹‰ï¼š</span><a href="#er-cha-shu-de-jie-kou-ding-yi" class="header-anchor">#</a></h5><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* bitree.h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> BITREE_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITREE_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-comment">/* Define a structure for binary tree nodes.*/</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BiTreeNode_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BiTreeNode</span> *left;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BiTreeNode_</span>*right;
}BiTreeNode;

<span class="hljs-comment">/* Defmne a structure for binary trees.*/</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BiTree_</span>
{
    <span class="hljs-type">int</span> size;
    <span class="hljs-built_in">int</span> (*compare)(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2);
    <span class="hljs-built_in">void</span> (*destroy)(<span class="hljs-type">void</span> *data);
    BiTreeNode *root;
}BiTree;

<span class="hljs-comment">/* Public Interface */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_init</span><span class="hljs-params">(BiTree *tree, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_destroy</span><span class="hljs-params">(BiTree *tree)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitree_ins_left</span><span class="hljs-params">(BiTree *tree, BiTreeNode *node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitree_ins_right</span><span class="hljs-params">(BiTree *tree, BiTreeNode *node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_rem_left</span><span class="hljs-params">(BiTree *tree, BiTreeNode *node)</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_rem_right</span><span class="hljs-params">(BiTree *tree,BiTreeNode *node)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitree_merge</span><span class="hljs-params">(BiTree *merge, BiTree *left,BiTree *right,<span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;

<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree_size(tree)	 ((tree)-&gt;size)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree root(tree)	 ((tree)-&gt;root))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitxee_is_eob(node)	 ((node) == NULL)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree_is_leaf(node) ((node)-&gt;left == NULL &amp;&amp; (node)-&gt;right == NULL)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree_data(node) ((node)-&gt;data)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree left(node) ((node)-&gt;left)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bitree_right(node) ((node)-&gt;right)</span>

<span class="hljs-meta">#edif</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* bitree.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"bitree.h"</span></span>

<span class="hljs-comment">/*bitree init*/</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_init</span><span class="hljs-params">(BiTree *tree, <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Initialize the binary tree.*/</span>
    tree-&gt;size = <span class="hljs-number">0</span>;
    tree-&gt;destroy = destroy;
    tree-&gt;root = <span class="hljs-literal">NULL</span>;
}

<span class="hljs-comment">/* bitree_destroy*/</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bitree_destroy</span><span class="hljs-params">(BiTree *tree)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Remove all the nodes from the tree.*/</span>
    <span class="hljs-built_in">bitree_rem_left</span>(tree, <span class="hljs-literal">NULL</span>);
    <span class="hljs-comment">/* No operations are aIlowed now, but clear the structure as a precaution. */</span>
    <span class="hljs-built_in">memset</span>(tree, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(BiTree);
}

<span class="hljs-comment">/* bitree ins left */</span>
<span class="hljs-type">int</span> <span class="hljs-built_in">bitree_ins_left</span>(BiTree *tree, BiTreeNode *node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)
{
    BiTreeNode new_node, **position;

    <span class="hljs-comment">/* Determine where to insert the node.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">/* Allow insertion at the root only in an empty tree.*/</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) &gt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

        position = &amp;tree-&gt;root;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Normally allow insertion only at the end of a branch.*/</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_left</span>(node) != <span class="hljs-literal">NULL</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

        position = &amp;node-&gt;left;
    }

    <span class="hljs-comment">/* Allocate storage for the node.*/</span>
    <span class="hljs-keyword">if</span> ((new_node = (BiTreeNode *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(BiTreeNcde))) == <span class="hljs-literal">NULL</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

    <span class="hljs-comment">/* Insert the node into the tree.*/</span>
    new_node-&gt;data = (<span class="hljs-type">void</span> *)data;
    new_node-&gt;ieft = <span class="hljs-literal">NULL</span>;
    new_node-&gt;right = <span class="hljs-literal">NULL</span>;
    *position = new_node;

    <span class="hljs-comment">/* Adjust the size of the tree to account for the inserted node.*/</span>
    tree-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* bitree_ins_right */</span>
<span class="hljs-type">int</span> <span class="hljs-built_in">bitree_ins_right</span>(BiTree *tree, BiTreeNode *node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)
{
    BiTreeNode *new_node, **position;

    <span class="hljs-comment">/* Determine where to insert the node.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">/* Allow insertion at the root only in an empty tree.*/</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) &gt; <span class="hljs-number">0</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

        position = &amp;tree-&gt;root;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Normally allow insertion only at the end of a branch. */</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_right</span>(node) != <span class="hljs-literal">NULL</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

        position = &amp;node-&gt;right;
    }

    <span class="hljs-comment">/* Allocate storage for the node.*/</span>
    <span class="hljs-keyword">if</span> ((new_node = (BiTreeNode *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(BiTreeNode))) == <span class="hljs-literal">NULL</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;

    <span class="hljs-comment">/* Insert the node into the tree.*/</span>
    new_node-&gt;data = (<span class="hljs-type">void</span> *)data;
    new_node-&gt;left = <span class="hljs-literal">NULL</span>;
    new_node-&gt;right = <span class="hljs-literal">NULL</span>;
    *position = new_node;

    <span class="hljs-comment">/* Adjust the size of the tree to account for the inserted node.*/</span>
    tree-&gt;size++;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* bitree_rem_left */</span>
<span class="hljs-type">void</span> <span class="hljs-built_in">bitree_rem_left</span>(BiTree *tree, BiTreeNode *node)
{
    BiTreeNode **position;
    <span class="hljs-comment">/* Do not allow removal from an empty tree.*/</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) == <span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">/*Determine where to remove nodes.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
        position = &amp;tree-&gt;root;
    <span class="hljs-keyword">else</span>
        position = &amp;node-&gt;left;

    <span class="hljs-comment">/*Remove the nodes.*/</span>
    <span class="hljs-keyword">if</span> (*position != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">bitree_rem_left</span>(tree, *position);
        <span class="hljs-built_in">bitree_rem_right</span>(tree, *position);
        <span class="hljs-keyword">if</span> (tree-&gt;destroy != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Call a user-defined function to free dynamically allocated data.*/</span>
            tree-&gt;<span class="hljs-built_in">destroy</span>((*position-&gt;data);   
        }

        <span class="hljs-built_in">free</span>(*position);
        *position = <span class="hljs-literal">NULL</span>;

        <span class="hljs-comment">/* Adjust the size of the tree to account for the removed node.*/</span>
        tree-&gt;size--;
    }
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">/* bitree_rem_right */</span>
<span class="hljs-type">void</span> <span class="hljs-built_in">bitree_rem_right</span>(BiTzee *tree, BiTreeNode *node)
{
    BiTreeNode **position;
    
    <span class="hljs-comment">/* Do not allow removal from an empty tree. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">/* Determine where to remove nodes.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
        position = &amp;tree-&gt;root;
    <span class="hljs-keyword">else</span>
        position = &amp;node-&gt;right;

    <span class="hljs-comment">/* Remove the nodes.*/</span>
    <span class="hljs-keyword">if</span> (*position != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">bitree_rem_left</span>(txee,*position);
        <span class="hljs-built_in">bitree_rem_right</span>(tree,*position);
        <span class="hljs-keyword">if</span> (tree-&gt;destroy != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* CalI a user-defined function to free dynamically allocated data.*/</span>
            tree-&gt;<span class="hljs-built_in">destroy</span>((*position)-&gt;data);
        }

        <span class="hljs-built_in">free</span>(*position);
        *position = <span class="hljs-literal">NULL</span>;

        <span class="hljs-comment">/* Adjust the size of the tree to account for the removed node.*/</span>
        tree-&gt;size--;
    }
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">/* bitree_merge*/</span>
<span class="hljs-type">int</span> <span class="hljs-built_in">bitree_merge</span>(BiTree *merge, BiTree *left, BiTree *right, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)
{
    <span class="hljs-comment">/* Initialize the merged tree.*/</span>
    <span class="hljs-built_in">bitree_init</span>(merge, left-&gt;destroy);

    <span class="hljs-comment">/* Insert the data for the root node of the merged tree.*/</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_ins_left</span>(merge, <span class="hljs-literal">NULL</span>, data) != <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">bitree_destroy</span>(merge);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-comment">/* Merge the two binary trees into a single binary tree.*/</span>
    <span class="hljs-built_in">bitree_root</span>(merge)-&gt;left = <span class="hljs-built_in">bitree_root</span>(left);
    <span class="hljs-built_in">bitree_root</span>(merge)-&gt;right = <span class="hljs-built_in">bitree_root</span>(right);

    <span class="hljs-comment">/* Adjust the size of the new binary tree.*/</span>
    merge-&gt;size = merge-&gt;size + <span class="hljs-built_in">bitree_size</span>(left) + <span class="hljs-built_in">bitree_size</span>(right);

    <span class="hljs-comment">/* Do not let the original trees access the merged nodes.*/</span>
    left-&gt;root = <span class="hljs-literal">NULL</span>;
    left-&gt;size = <span class="hljs-number">0</span>;
    right-&gt;root = <span class="hljs-literal">NULL</span>;
    right-&gt;size = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div>

<h5><span id="er-cha-sou-suo-shu">äºŒå‰æœç´¢æ ‘</span><a href="#er-cha-sou-suo-shu" class="header-anchor">#</a></h5><h6><span id="ding-yi">å®šä¹‰ï¼š</span><a href="#ding-yi" class="header-anchor">#</a></h6><blockquote>
<p>äºŒå‰æœç´¢æ ‘æ˜¯æœ‰äºŒå‰æ ‘ç»„æˆçš„ä¸“ç”¨äºæŸ¥æ‰¾å’Œæœç´¢ç›®çš„çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚</p>
<p>æ•°æ®æ’å…¥éµå¾ªï¼šæ¯”æ ¹èŠ‚ç‚¹(root)å¤§çš„æ•°æ’å…¥æ ¹å³è¾¹ï¼Œæ¯”æ ¹èŠ‚ç‚¹å°çš„æ•°æ’å…¥å·¦è¾¹ã€‚</p>
<p>æ•°æ®æœç´¢éµå¾ªï¼šè¦æŸ¥è¯¢çš„å€¼æ¯”æ ¹(root)å¤§çš„æ•°å‘å³å­èŠ‚ç‚¹æŸ¥ï¼Œæ¯”æ ¹èŠ‚ç‚¹å°å‘å·¦èŠ‚ç‚¹æŸ¥ã€‚</p>
<p>ä¸å…è®¸æœ‰é‡å¤å€¼å‡ºç°</p>
<p>äºŒå‰æœç´ æ ‘åº”å°½é‡ä¿æŒå¹³è¡¡ï¼Œä½†æ¯”è¾ƒå›°éš¾ã€‚éå¹³è¡¡æ ‘ä¼šé€ æˆæœç´¢çš„èŠ‚ç‚¹æ•°é‡è¿‡å¤šï¼Œæœ€å¤šO(n)</p>
</blockquote>
<p>äºŒå‰æœç´¢æ ‘è¦ä¿æŒå¹³è¡¡æœ€å¥½çš„æ–¹æ³•æ˜¯</p>
<h5><span id="avl-shu"><strong>AVL</strong>æ ‘</span><a href="#avl-shu" class="header-anchor">#</a></h5><p>å…¶å®šä¹‰ä¸ºï¼š</p>
<blockquote>
<p>AVLæ ‘æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿æŒäº†ä¸€ä¸ªå¹³è¡¡å› å­ã€‚</p>
<p>æ’å…¥ç»“ç‚¹æ—¶AVLæ ‘éœ€è¦è‡ªæˆ‘è°ƒæ•´ã€‚</p>
<p>å¹³è¡¡å› å­ï¼šç»“ç‚¹çš„å³å­æ ‘é«˜åº¦-å·¦å­æ ‘é«˜åº¦ï¼Œå…¶å€¼ä¸º+1, 0ï¼Œ-1ã€‚</p>
<p>+1ï¼šä»£è¡¨æ ‘æ˜¯å·¦å€¾æ–œçš„</p>
<p>-1ï¼šä»£è¡¨æ ‘æ˜¯å³å€¾æ–œçš„</p>
</blockquote>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/Algorithmic_refinement/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91.png" srcset="/img/loading.gif" lazyload></p>
<p>å¹³è¡¡å› å­æ”¹å˜ï¼š</p>
<blockquote>
<p>æ’å…¥æ–°çš„ç»“ç‚¹ä¼šé€ æˆå¹³è¡¡å› å­æ”¹å˜ï¼Œå› æ­¤è¿™æ£µæ ‘éœ€è¦é‡æ–°å¹³è¡¡ï¼Œæˆ‘ä»¬ç§°è¿™ç§å¹³è¡¡ä¸º<code>AVLæ ‘çš„æ—‹è½¬</code></p>
</blockquote>
<p><code>AVLæ ‘</code>æ—‹è½¬æ–¹æ³•ï¼š</p>
<blockquote>
<p>LL(left-left)ï¼ŒLR(left-right)ï¼ŒRR(right-right)ï¼ŒRL(right-left)</p>
</blockquote>
<blockquote>
<p>avlæ ‘æ—‹è½¬æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•:</p>
<blockquote>
<ol>
<li><p>æŠŠè¿™é¢—æ ‘æŠ½è±¡æˆä¸€æ£µè‡ªç„¶ç•Œçš„æ ‘ï¼ŒèŠ‚ç‚¹çš„å¹³è¡¡å› å­ä¸æ˜¯-1ï¼Œ0ï¼Œ+1æ—¶ï¼ŒRRå’ŒLLçš„èŠ‚ç‚¹å°äº-1æˆ–å¤§äº+1æ—¶æ ‘çš„æ ‘æ¢¢å‘ä¸‹è½ä¸€å±‚ï¼›</p>
</li>
<li><p>RLå’ŒLRçš„èŠ‚ç‚¹å°äº-1æˆ–å¤§äº+1æ—¶æ˜¯å› ä¸ºä¸å¹³è¡¡çš„å­èŠ‚ç‚¹å¼•èµ·çš„ï¼Œæ‰¾åˆ°ä¸å¹³è¡¡çš„å­èŠ‚ç‚¹é‡å¤LLæˆ–RRçš„è¿‡ç¨‹ï¼Œä¸å¹³è¡¡å­èŠ‚ç‚¹æ—‹è½¬ä¹‹åçˆ¶èŠ‚ç‚¹é‡å¤LLæˆ–RR.</p>
</li>
</ol>
</blockquote>
</blockquote>
<h6><span id="jie-kou-ding-yi">æ¥å£å®šä¹‰ï¼š</span><a href="#jie-kou-ding-yi" class="header-anchor">#</a></h6><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* bistree.h */</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> BISTREE_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BISTREE_R</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"bitree.h"</span></span>

<span class="hljs-comment">/* Define balance factors for AVL trees. */</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> AVL_LFT_HEAVY   1</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> AVL_BALANCED    0</span>
<span class="hljs-meta">#deftne AVERGT_HEAVY    -1</span>

<span class="hljs-comment">/* Define a structure for nodes in AVL trees. */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AvlNode_</span>
{
    <span class="hljs-type">void</span> *data;
    <span class="hljs-type">int</span> hidden;
    <span class="hljs-type">int</span> factor;
}Av1Node;

<span class="hljs-comment">/* Implement binary search trees as binary trees. */</span>
<span class="hljs-keyword">typedef</span> BiTree BisTree;

<span class="hljs-comment">/* Public Interface */</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bistree_init</span><span class="hljs-params">(Bistree *tree, <span class="hljs-type">int</span> (*compare)(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *key1, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destroy)(<span class="hljs-type">void</span> *data))</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bistree_destroy</span><span class="hljs-params">(BisTree *tree)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bistree_insert</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bistree_remove</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bistree_lookup</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">void</span> **data)</span></span>;
<span class="hljs-meta">#<span class="hljs-keyword">define</span> bistree_size(tree) ((txee) -&gt;size)</span>
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/* bistree.c */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"bistree.h"</span></span>

<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">destroy_right</span><span class="hljs-params">(BisTree *tree, BiTreeNode *node)</span></span>;

/ * rotate_left */
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">rotate_left</span><span class="hljs-params">(BiTreeNode **node)</span></span>
<span class="hljs-function"></span>{
    BiTreeNode *left, *grandchild;

    left = <span class="hljs-built_in">bitree_left</span>(*node);
    <span class="hljs-keyword">if</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor == AVL_LFT_HEAVY)
    {
        <span class="hljs-comment">/* Perform an LL rotation. */</span>
        <span class="hljs-built_in">bitree_left</span>(*node) = <span class="hljs-built_in">bitree_right</span>(left);
        <span class="hljs-built_in">bitree_right</span>(left) = *node;
        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor = AVL_BALANCED;
        *node = left;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Perform an LR rotation. */</span>
        grandchild = <span class="hljs-built_in">bitree_right</span>(left);
        <span class="hljs-built_in">bitree_right</span>(left) = <span class="hljs-built_in">bitree_left</span>(grandchild);
        <span class="hljs-built_in">bitree_left</span>(grandchild) = left;
        <span class="hljs-built_in">bitree_left</span>(*node) = <span class="hljs-built_in">bitree_right</span>(grandchild);
        <span class="hljs-built_in">bitree_right</span>(grandchild) = *node;

        <span class="hljs-keyword">switch</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor)
        {
            <span class="hljs-keyword">case</span> AVL_LFT_HEAVY:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_RGT_HEAVY;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor = AVL_BALANCED;
                <span class="hljs-keyword">break</span>;
            
            <span class="hljs-keyword">case</span> AVL_BALANCED:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor = AVL_BALANCED;
                <span class="hljs-keyword">break</span>;
            
            <span class="hljs-keyword">case</span> AVL_RGT_HEAVY:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(left))-&gt;factor = AVL_LFT_HEAVY;
                <span class="hljs-keyword">break</span>;
        }

        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(grandchild))-&gt;factor = AVL_BALANCED;
        *node = grandchild;
    }
}

/ * rotate_right */
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">rotate_right</span><span class="hljs-params">(BiTreeNode **node)</span></span>
<span class="hljs-function"></span>{
    BiTreeNode *right, *grandchild;
    right = <span class="hljs-built_in">bitree_right</span>(*node);

    <span class="hljs-keyword">if</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(right))-&gt;factor == AVL_RGT_HEAVY)
    {
        <span class="hljs-comment">/* Perform an RR rotation. */</span>
        <span class="hljs-built_in">bitree_right</span>(*node) = <span class="hljs-built_in">bitree_right</span>(right);
        <span class="hljs-built_in">bitree_left</span>(right) = *node;
        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(right))-&gt;factor = AVL_BALANCED;
        *node = right;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Perform an RL rotation. */</span>
        grandchild = <span class="hljs-built_in">bitree_left</span>(right);
        <span class="hljs-built_in">bitree_right</span>(right) = <span class="hljs-built_in">bitree_right</span>(grandchild);
        <span class="hljs-built_in">bitree_right</span>(grandchild) = right;
        <span class="hljs-built_in">bitree_right</span>(*node) = <span class="hljs-built_in">bitree_left</span>(grandchild);
        <span class="hljs-built_in">bitree_left</span>(grandchild) = *node;

        <span class="hljs-keyword">switch</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(grandchild))-&gt;factor)
        {
            <span class="hljs-keyword">case</span> AVL_LFT_HEAVY:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(right))-&gt;factor = AVL_RGT_HEAVY;
                <span class="hljs-keyword">break</span>;
            
            <span class="hljs-keyword">case</span> AVL_BALANCED:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(right))-&gt;factor = AVL_BALANCED;
                <span class="hljs-keyword">break</span>;
            
            <span class="hljs-keyword">case</span> AVL_RGT_HEAVY:
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_LFT_HEAVY;
                ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(right))-&gt;factor = AVL_BALANCED ;
                <span class="hljs-keyword">break</span>;
        }

        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(grandchild))-&gt;factor = AVL_BALANCED;
        *node = grandchild;
    }
}

<span class="hljs-comment">/* destroy_left */</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">destroy_left</span><span class="hljs-params">(BisTree *tree, BiTreeNode *node)</span></span>
<span class="hljs-function"></span>{
    BiTreeNode **position;

    <span class="hljs-comment">/* Do not allow destruction of an empty tree. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">/* Determine where to destroy nodes.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
        position = &amp;tree-&gt;root;
    <span class="hljs-keyword">else</span>
        position = &amp;tree-&gt;left;

    <span class="hljs-comment">/* Destroy the nodes. */</span>
    <span class="hljs-keyword">if</span> (*position != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">destroy_left</span>(tree, *position);
        <span class="hljs-built_in">destroy_right</span>(tree, *position);

        <span class="hljs-keyword">if</span> (tree-&gt;destroy != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Call a user-defined function to free dynamically allocated data. */</span>
            tree-&gt;<span class="hljs-built_in">destory</span>(((AvlNode *)(*position)-&gt;data)-&gt;data);
        }
        
        <span class="hljs-comment">/* Free the AVL data in the node, then free the node itself. */</span>
        <span class="hljs-built_in">free</span>((*position)-&gt;data);
        <span class="hljs-built_in">free</span>(*position);
        *position = <span class="hljs-literal">NULL</span>;

        <span class="hljs-comment">/* Adjust the size of the tree to account for the destroyed node. */</span>
        tree-&gt;size--;
    }
}

/ * destroy_right */
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">destroy_right</span><span class="hljs-params">(BisTree *tree, BiTreeNode *node)</span></span>
<span class="hljs-function"></span>{
     BiTreeNode **position;

    <span class="hljs-comment">/* Do not allow destruction of an empty tree. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_size</span>(tree) == <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">/* Determine where to destroy nodes.*/</span>
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>)
        position = &amp;tree-&gt;root;
    <span class="hljs-keyword">else</span>
        position = &amp;tree-&gt;right;

    <span class="hljs-comment">/* Destroy the nodes. */</span>
    <span class="hljs-keyword">if</span> (*position != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">destroy_left</span>(tree, *position);
        <span class="hljs-built_in">destroy_right</span>(tree, *position);

        <span class="hljs-keyword">if</span> (tree-&gt;destroy != <span class="hljs-literal">NULL</span>)
        {
            <span class="hljs-comment">/* Call a user-defined function to free dynamically allocated data. */</span>
            tree-&gt;<span class="hljs-built_in">destory</span>(((AvlNode *)(*position)-&gt;data)-&gt;data);
        }
        
        <span class="hljs-comment">/* Free the AVL data in the node, then free the node itself. */</span>
        <span class="hljs-built_in">free</span>((*position)-&gt;data);
        <span class="hljs-built_in">free</span>(*position);
        *position = <span class="hljs-literal">NULL</span>;

        <span class="hljs-comment">/* Adjust the size of the tree to account for the destroyed node. */</span>
        tree-&gt;size--;
    }
}

<span class="hljs-comment">/* insert */</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">insert</span><span class="hljs-params">(BisTree *tree, BiTreeNode **node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data, <span class="hljs-type">int</span> *balanced)</span></span>
<span class="hljs-function"></span>{
    AvlNode *avl_data;
    <span class="hljs-type">int</span> cmpval, retval;

    <span class="hljs-comment">/* Insert the data into the tree. */</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_is_eob</span>(*node))
    {
        <span class="hljs-comment">/* Handle insertion into an empty tree.*/</span>
        <span class="hljs-keyword">if</span> ((avl_data = (AvlNode *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(AvlNode))) == <span class="hljs-literal">NULL</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        avl data-&gt;factor = AVL_BALANCED;
        avi data-&gt;hidden = <span class="hljs-number">0</span>;
        avl_data-&gt;data = (<span class="hljs-type">void</span> *)data;
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bitree_ins_left</span>(tree, *node, avl_data);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Handle insertion into a tree that is not empty. */</span>
        cmpval = tree-&gt;<span class="hljs-built_in">compare</span>(data, ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;data);
        <span class="hljs-keyword">if</span> (cmpval &lt; <span class="hljs-number">0</span>)
        {
            <span class="hljs-comment">/* Move to the left. */</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_is_eob</span>(<span class="hljs-built_in">bitree_left</span>(*node)))
            {
                <span class="hljs-keyword">if</span> ((avl_data = (AvlNode *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(AvlNode))) == <span class="hljs-literal">NULL</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
                
                avl_data-&gt;factor = AVL_BALANCED;
                avl_data-&gt;hidden = <span class="hljs-number">0</span>;
                avl_data-&gt;data = (<span class="hljs-type">void</span> *)data;

                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_ins_left</span>(tree, *node, avl_data) != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
                
                *balance = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">if</span> ((retval = <span class="hljs-built_in">insert</span>(tree, &amp;<span class="hljs-built_in">bitree_left</span>(*node), data, balanced)) != <span class="hljs-number">0</span>)
                <span class="hljs-keyword">return</span> retval;
            }

            <span class="hljs-comment">/* Ensure that the tree remains balanced. */</span>
            <span class="hljs-keyword">if</span> (!(*balanced))
            {
                <span class="hljs-keyword">switch</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor)
                {
                    <span class="hljs-keyword">case</span> AVL_LFT_HEAVY:
                        <span class="hljs-built_in">rotate_left</span>(node) ;
                        *balanced = <span class="hljs-number">1</span>;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> AVL_BALANCED:
                        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_LFT_HEAVY;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> AVL_RGT_HEAVY:
                        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                        *balanced = <span class="hljs-number">1</span>;
                        <span class="hljs-keyword">break</span>;
                }
                
            }
        } <span class="hljs-comment">/* if (cmpval &lt; 0) */</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmpval &gt; <span class="hljs-number">0</span>)
        {
            <span class="hljs-comment">/* move to the right. */</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_is_eob</span>(<span class="hljs-built_in">bitree_right</span>(*node)))
            {
                <span class="hljs-keyword">if</span> ((avl_data = (AvlNode *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(AvlNode))) == <span class="hljs-literal">NULL</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
                
                avl_data-&gt;factor = AVL_BALANCED;
                avl_data-&gt;hidden = <span class="hljs-number">0</span>;
                avl_data-&gt;data = (<span class="hljs-type">void</span> *)data;

                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_ins_right</span>(tree, *node, avl_data) != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
                
                *balance = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">else</span> 
            {
                <span class="hljs-keyword">if</span> ((retval = <span class="hljs-built_in">insert</span>(tree, &amp;<span class="hljs-built_in">bitree_right</span>(*node), data, balanced)) != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">return</span> retval;
            }

            <span class="hljs-comment">/* Ensure that the tree remains balanced. */</span>
            <span class="hljs-keyword">if</span> (!(*balanced))
            {
                <span class="hljs-keyword">switch</span> (((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor)
                {
                    <span class="hljs-keyword">case</span> AVL_LFT_HEAVY:
                        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_BALANCED;
                        *balanced = <span class="hljs-number">1</span>;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> AVL_BALANCED:
                        ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;factor = AVL_RGT_HEAVY;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> AVL_RGT_HEAVY:
                        <span class="hljs-built_in">rotate_right</span>(node) ;
                        *balanced = <span class="hljs-number">1</span>;
                        <span class="hljs-keyword">break</span>;
                }
                
            } <span class="hljs-comment">/* if (cmpval) &gt; 0 */</span>
            <span class="hljs-keyword">else</span>
            { 
                <span class="hljs-comment">/* Handle finding a copy of the data. */</span>
                <span class="hljs-keyword">if</span> (!((Av1Node *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;hodden)
                {
                    <span class="hljs-comment">/* Do nothing since the data is in the tree and not hidden. */</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-comment">/* Insert the new data and mark it as not hidden. */</span>
                    <span class="hljs-keyword">if</span> (tree-&gt;destroy != <span class="hljs-literal">NULL</span>)
                    {
                        <span class="hljs-comment">/* Destroy the hidden data since it is being replaced. */</span>
                        tree-&gt;<span class="hljs-built_in">destory</span>(((Av1Node *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;data);
                    }
                    ((Av1Node *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;data = (<span class="hljs-type">void</span> *)data;
                    ((Av1Node *)<span class="hljs-built_in">bitree_data</span>(*node))-&gt;hidden = <span class="hljs-number">0</span>;
                    
                    <span class="hljs-comment">/* Do not rebalance because the tree structure is unchanged. */</span>
                    *balanced = <span class="hljs-number">1</span>;
                }
            }
        }                     
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* hide */</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">hide</span><span class="hljs-params">(BisTree *tree, BiTreeNode *node, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> cmpval, retval;

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_is_eob</span>(node))
    {
        <span class="hljs-comment">/* Return that the data was not found. */</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    cmpval = tree-&gt;<span class="hljs-built_in">compare</span>(data, ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(node))-&gt;data);
    <span class="hljs-keyword">if</span> (cmpval &lt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Move to the left.*/</span>
        retval = <span class="hljs-built_in">hide</span>(tree, <span class="hljs-built_in">bitree_left</span>(node), data);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmpval &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Move to the right.*/</span>
        retval = <span class="hljs-built_in">hide</span>(tree, <span class="hljs-built_in">bitree_right</span>(node), data);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">/* Mark the node as hidden. */</span>
        ((AvLNode *)<span class="hljs-built_in">bitree_data</span>(node))-&gt;hidden = <span class="hljs-number">1</span>;
        retvaL = <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> retval;
}

<span class="hljs-comment">/* lookup */</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">lookup</span><span class="hljs-params">(BisTree *tree, BiTreeNode *node, <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> cmpval, retval;

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">bitree_is_eob</span>(node))
    {
        <span class="hljs-comment">/* Return that the data was not found. */</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    cmpval = tree-&gt;<span class="hljs-built_in">compare</span>(data, ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(node))-&gt;data);
    <span class="hljs-keyword">if</span> (cmpval &lt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Move to the left.*/</span>
        retval = <span class="hljs-built_in">lookup</span>(tree, <span class="hljs-built_in">bitree_left</span>(node), data);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmpval &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* Move to the right.*/</span>
        retval = <span class="hljs-built_in">lookup</span>(tree, <span class="hljs-built_in">bitree_right</span>(node), data);
    }
     <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">if</span>(!((AvlNode *)<span class="hljs-built_in">bitree_data</span>(node))-&lt;hidden)
        {
            <span class="hljs-comment">/* Pass back the data from the tree. */</span>
            *data = ((AvlNode *)<span class="hljs-built_in">bitree_data</span>(node))-&gt;data;
            retval = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-comment">/* Return that the data was not found. */</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; 
        }
    }
    <span class="hljs-keyword">return</span> retval;
}

<span class="hljs-comment">/* bistree_init */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bistree_init</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">int</span> (*cpmpare)(<span class="hljs-type">void</span> *keyl, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *key2), <span class="hljs-type">void</span> (*destory)(*data))</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Initialize the tree. */</span>
    <span class="hljs-built_in">bitree_init</span>(tree, destory);
    tree-&gt;compare = compare;
}

<span class="hljs-comment">/* bistree_destroy */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bistree_destroy</span><span class="hljs-params">(BisTree *tree)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">/* Destroy all nodes in the tree. */</span>
    <span class="hljs-built_in">destory_left</span>(tree, <span class="hljs-literal">NULL</span>);

    <span class="hljs-comment">/* No operations are allowed now, but clear the structure as a precaution. */</span>
    <span class="hljs-built_in">memset</span>(tree, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(BisTree));
}

<span class="hljs-comment">/* bistree_insert */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bistree_insert</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-type">int</span> balanced = O;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">insert</span>(tree, &amp;<span class="hljs-built_in">bitree_rot</span>(tree), data, &amp;balanced);
}

<span class="hljs-comment">/* bitree_remove */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bitree_remove</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">hide</span>(tree, <span class="hljs-built_in">bitree_root</span>(tree), data);
}

<span class="hljs-comment">/* bistree_lookup */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bistree_lookup</span><span class="hljs-params">(BisTree *tree, <span class="hljs-type">void</span> *data)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">lookup</span>(tree, <span class="hljs-built_in">bitree_root</span>(tree), data);
}
</code></pre></div>

<h5><span id="hong-hei-shu-r-b-shu">çº¢é»‘æ ‘ï¼ˆR-Bæ ‘ï¼‰</span><a href="#hong-hei-shu-r-b-shu" class="header-anchor">#</a></h5><p><img src="https://gitee.com/txt1994/images/raw/master/img/R_B_tree/R_B_tree.png" srcset="/img/loading.gif" lazyload></p>
<h6><span id="ding-yi">å®šä¹‰ï¼š</span><a href="#ding-yi" class="header-anchor">#</a></h6><p><strong>çº¢é»‘æ ‘</strong> ä¸ºå¦¥åçš„AVLæ ‘ï¼Œå¹³è¡¡è¦æ±‚æ²¡AVLæ ‘ä¸¥æ ¼ï¼Œå› æ­¤é€‚ç”¨èŒƒå›´æ¯”AVLæ ‘å¤š</p>
<p>çº¢é»‘æ ‘æ˜¯æ¯ä¸ªç»“ç‚¹éƒ½å¸¦æœ‰é¢œè‰²å±æ€§çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œé¢œè‰²æˆ–çº¢è‰²æˆ–é»‘è‰²ã€‚å¾…æ’å…¥ç»“ç‚¹é»˜è®¤ä¸ºçº¢è‰²ç»“ç‚¹ï¼Œæ’å…¥æ—¶æŒ‰ç…§äºŒåˆ†æ’å…¥ã€‚</p>
<ul>
<li><p>æ€§è´¨1. ç»“ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚</p>
</li>
<li><p>æ€§è´¨2. æ ¹ç»“ç‚¹æ˜¯é»‘è‰²ã€‚ </p>
</li>
<li><p>æ€§è´¨3. æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²ã€‚ï¼ˆå¶å­æ˜¯NILç»“ç‚¹ï¼‰</p>
</li>
<li><p>æ€§è´¨4. æ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚ï¼ˆä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²ç»“ç‚¹ï¼‰</p>
</li>
<li><p>æ€§è´¨5. ä»ä»»ä¸€èŠ‚ç»“ç‚¹å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²ç»“ç‚¹ã€‚</p>
</li>
</ul>
<h6><span id="r-b-shu-de-cha-ru-xuan-zhuan-fa"><strong><code>R_Bæ ‘çš„æ’å…¥æ—‹è½¬æ³•</code></strong></span><a href="#r-b-shu-de-cha-ru-xuan-zhuan-fa" class="header-anchor">#</a></h6><blockquote>
<p> RRæˆ–LLï¼Œåˆšæ’å…¥çš„ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”ç»“ç‚¹ä¹Ÿæ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹å’Œå”å”å˜ä¸ºé»‘è‰²ï¼Œç¥–çˆ¶ç»“ç‚¹å˜ä¸ºçº¢è‰²</p>
<blockquote>
<p>åˆšæ’å…¥çš„ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”ç»“ç‚¹æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹å’Œå”å”ç»“ç‚¹éœ€è¦å·¦æ—‹æˆ–å³æ—‹ï¼Œç„¶ååŸçˆ¶ç»“ç‚¹å˜ä¸ºé»‘è‰²ï¼Œå”å”ç»“ç‚¹å˜ä¸ºçº¢è‰²ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<p> LRæˆ–RLï¼Œåˆšæ’å…¥ç»“ç‚¹çˆ¶ç»“ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”ç»“ç‚¹ä¹Ÿæ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹å’Œå”å”ç»“ç‚¹å˜ä¸ºé»‘è‰²ï¼Œç¥–çˆ¶ç»“ç‚¹å˜ä¸ºçº¢è‰²ï¼Œ</p>
<blockquote>
<p>åˆšæ’å…¥ç»“ç‚¹çˆ¶ç»“ç‚¹æ˜¯çº¢è‰²ï¼Œå”å”ç»“ç‚¹ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆåˆšæ’å…¥ç»“ç‚¹å’Œçˆ¶èŠ‚ç‚¹éœ€è¦å·¦æ—‹æˆ–å³æ—‹ï¼Œå†æ¬¡æ‰§è¡ŒRRæˆ–LLæ­¥éª¤ã€‚</p>
</blockquote>
</blockquote>
<h6><span id="r-b-shu-de-shan-chu-xuan-zhuan-fa"><strong>R_Bæ ‘çš„åˆ é™¤æ—‹è½¬æ³•</strong>ï¼š</span><a href="#r-b-shu-de-shan-chu-xuan-zhuan-fa" class="header-anchor">#</a></h6><p>â€‹        R_Bæ ‘çš„åˆ é™¤ä¸ºçº¢é»‘æ ‘æœ€å¤æ‚éƒ¨åˆ†</p>
<p>1ã€çº¢é»‘æ ‘åˆ é™¤çš„æƒ…å½¢</p>
<p>â€‹    ä¸€ã€ä»æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹Xï¼ˆä»¥å¯»æ‰¾åç»§èŠ‚ç‚¹çš„æ–¹å¼è¿›è¡Œåˆ é™¤ï¼‰</p>
<p>â€‹        æƒ…å†µâ‘ ï¼šå¦‚æœXæ²¡æœ‰å­©å­ï¼Œä¸”å¦‚æœXæ˜¯çº¢è‰²ï¼Œç›´æ¥åˆ é™¤Xï¼›å¦‚æœXæ˜¯é»‘è‰²ï¼Œåˆ™ä»¥Xä¸ºå½“å‰èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬è°ƒè‰²ï¼Œæœ€ååˆ æ‰X</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/R_B_tree/R_B_Tree_leaf.svg" srcset="/img/loading.gif" lazyload></p>
<p>â€‹        æƒ…å†µâ‘¡ï¼šå¦‚æœXåªæœ‰ä¸€ä¸ªå­©å­Cï¼Œäº¤æ¢Xå’ŒCçš„æ•°å€¼ï¼Œå†å¯¹æ–°Xè¿›è¡Œåˆ é™¤ã€‚æ ¹æ®çº¢é»‘æ ‘ç‰¹æ€§ï¼Œæ­¤æ—¶Xä¸å¯èƒ½ä¸ºçº¢è‰²ï¼Œå› ä¸ºçº¢è‰²èŠ‚ç‚¹è¦ä¹ˆæ²¡æœ‰å­©å­ï¼Œè¦ä¹ˆæœ‰ä¸¤ä¸ªé»‘å­©å­ã€‚æ­¤æ—¶ä»¥æ–°Xä¸ºå½“å‰èŠ‚ç‚¹è¿›è¡Œæƒ…å†µâ‘ çš„åˆ¤æ–­</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/R_B_tree/R_B_Tree_one_node.svg" srcset="/img/loading.gif" lazyload></p>
<p>â€‹        æƒ…å†µâ‘¢ï¼šå¦‚æœXæœ‰ä¸¤ä¸ªå­©å­ï¼Œåˆ™ä»åç»§ä¸­æ‰¾åˆ°æœ€å°èŠ‚ç‚¹Dï¼Œäº¤æ¢Xå’ŒDçš„æ•°å€¼ï¼Œå†å¯¹æ–°Xè¿›è¡Œåˆ é™¤ã€‚æ­¤æ—¶ä»¥æ–°Xä¸ºå½“å‰èŠ‚ç‚¹è¿›è¡Œæƒ…å†µâ‘ æˆ–â‘¡çš„åˆ¤æ–­</p>
<p>â€‹    äºŒã€æ—‹è½¬è°ƒè‰²ï¼ˆN=æ—‹è½¬è°ƒè‰²çš„å½“å‰èŠ‚ç‚¹[ç­‰äºæƒ…å†µâ‘ ä¸­çš„X]ï¼ŒP=Nçš„çˆ¶äº²ï¼ŒW=Nçš„å…„å¼Ÿï¼ŒNf=Nçš„è¿œä¾„å­ï¼ŒNn=Nçš„è¿‘ä¾„å­ï¼‰</p>
<p>â€‹        æƒ…å†µ1ï¼šNæ˜¯æ ¹æˆ–è€…Næ˜¯çº¢è‰²ï¼Œåˆ™ï¼šç›´æ¥å°†Nè®¾ä¸ºé»‘è‰²</p>
<p>â€‹        æƒ…å†µ2ï¼šNä¸æ˜¯æ ¹ä¸”Næ˜¯é»‘è‰²ï¼Œä¸”Wä¸ºçº¢è‰²ï¼Œåˆ™ï¼šå°†Wè®¾ä¸ºé»‘è‰²ï¼ŒPè®¾ä¸ºçº¢è‰²ï¼Œå¯¹Pè¿›è¡Œæ—‹è½¬(Nä¸ºPçš„å·¦å­æ—¶è¿›è¡Œå·¦æ—‹ï¼ŒNä¸ºPçš„å³å­æ—¶è¿›è¡Œå³æ—‹)ï¼Œå°†æƒ…å†µè½¬åŒ–ä¸ºæƒ…å†µ1ã€2ã€3ã€4ã€5</p>
<p>â€‹        æƒ…å†µ3ï¼šNä¸æ˜¯æ ¹ä¸”Næ˜¯é»‘è‰²ï¼Œä¸”Wä¸ºé»‘è‰²ï¼Œä¸”Wçš„å·¦å³å­å‡ä¸ºé»‘è‰²ï¼Œåˆ™ï¼šå°†Wè®¾ä¸ºçº¢è‰²ï¼Œå°†Pè®¾ä¸ºå½“å‰èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬è°ƒè‰²ï¼Œå°†æƒ…å†µè½¬åŒ–ä¸ºæƒ…å†µ1ã€2ã€3ã€4ã€5</p>
<p>â€‹        æƒ…å†µ4ï¼šNä¸æ˜¯æ ¹ä¸”Næ˜¯é»‘è‰²ï¼Œä¸”Wä¸ºé»‘è‰²ï¼Œä¸”Nfä¸ºé»‘è‰²ï¼ŒNnä¸ºçº¢è‰²ï¼Œåˆ™ï¼šäº¤æ¢Wä¸Nnçš„é¢œè‰²ï¼Œå¹¶å¯¹Wè¿›è¡Œæ—‹è½¬(Nä¸ºPçš„å·¦å­è¿›è¡Œå³æ—‹ï¼ŒNä¸ºPçš„å³å­è¿›è¡Œå·¦æ—‹)ï¼Œæ—‹è½¬åNçš„æ–°å…„å¼ŸWæœ‰ä¸€ä¸ªçº¢è‰²WRï¼Œåˆ™è½¬æ¢ä¸ºæƒ…å†µ5</p>
<p>â€‹        æƒ…å†µ5ï¼šNä¸æ˜¯æ ¹ä¸”Næ˜¯é»‘è‰²ï¼Œä¸”Wä¸ºé»‘è‰²ï¼Œä¸”Nfä¸ºçº¢è‰²ï¼ŒNnä¸ºé»‘è‰²ï¼Œåˆ™ï¼šå°†Wè®¾ä¸ºPçš„é¢œè‰²ï¼ŒPå’ŒNfè®¾ä¸ºé»‘è‰²ï¼Œå¹¶å¯¹Pè¿›è¡Œæ—‹è½¬(Nä¸ºPçš„å·¦å­è¿›è¡Œå·¦æ—‹ï¼ŒNä¸ºPçš„å³å­è¿›è¡Œå³æ—‹)ï¼ŒNè®¾ä¸ºæ ¹</p>
<h5><span id="b-shu-b-shu-b-shu">Bæ ‘ï¼ŒB+æ ‘ï¼ŒB*æ ‘</span><a href="#b-shu-b-shu-b-shu" class="header-anchor">#</a></h5><p>å½“æ•°æ®é‡éå¸¸å¤§æ—¶ï¼ŒäºŒå‰æ ‘å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¦‚æœè¿˜ç”¨äºŒå‰æ ‘é‚£ä¹ˆæ ‘çš„æ·±åº¦è¿‡å¤§ï¼Œä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨å¤šä¸ªæ•°æ®å°±åº”è¿è€Œç”Ÿäº†ã€‚</p>
<p>å®šä¹‰ï¼š</p>
<p>Bæ ‘æ˜¯ä¸€ç§å¹³è¡¡çš„å¤šåˆ†æ ‘ï¼Œé€šå¸¸æˆ‘ä»¬è¯´mé˜¶çš„Bæ ‘ï¼Œå®ƒå¿…é¡»æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š </p>
<ul>
<li><p>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰mä¸ªå­èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆé™¤äº†æ ¹ï¼‰å…·æœ‰è‡³å°‘âŒˆ m/2âŒ‰å­èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>å¦‚æœæ ¹ä¸æ˜¯å¶èŠ‚ç‚¹ï¼Œåˆ™æ ¹è‡³å°‘æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>å…·æœ‰<em>k</em>ä¸ªå­èŠ‚ç‚¹çš„éå¶èŠ‚ç‚¹åŒ…å«<em>k</em> -1ä¸ªé”®ã€‚</p>
</li>
<li><p>æ‰€æœ‰å¶å­éƒ½å‡ºç°åœ¨åŒä¸€æ°´å¹³ï¼Œæ²¡æœ‰ä»»ä½•ä¿¡æ¯ï¼ˆé«˜åº¦ä¸€è‡´ï¼‰ã€‚</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/data-structure/997909-20190727111522935-981534929.png" srcset="/img/loading.gif" lazyload></p>
</li>
</ul>
<p>æ­¤æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰4ä¸ªç»“ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸‰ä¸ªå€¼ï¼Œ</p>
<p>æ’å…¥å¦‚åˆ é™¤æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lianzhilei/p/11250589.html"><strong>Bæ ‘æ’å…¥ä¸åˆ é™¤</strong></a></p>
<p><strong>B+æ ‘</strong></p>
<p>åœ¨Bæ ‘çš„åŸºç¡€ä¸Šå¢åŠ äº†æ•°æ®éå†ä¼˜ç‚¹ï¼Œæƒ³è¦éå†æ•´ä¸ªæ ‘çš„æ•°æ®åªè¦æŠŠå¶å­èŠ‚ç‚¹ä¾¿å®Œæ¯•å°±è¡Œï¼Œå› ä¸ºB+æ ‘çš„å¶å­èŠ‚ç‚¹æ•°æ®æ˜¯æ•´æ£µæ ‘æ•°æ®ï¼Œéå¶å­èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ç´¢å¼•ã€‚</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/data-structure/997909-20190728114240297-169990922.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>B*æ ‘</strong></p>
<p>B*æ ‘åœ¨B+æ ‘çš„åŸºç¡€ä¸Šå¢åŠ äº†éå¶å­ç»“ç‚¹ä¹‹é—´é“¾è¡¨ç›¸è”ç³»ã€‚</p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/data-structure/171056_sAnR_135650.jpg" srcset="/img/loading.gif" lazyload></p>
<h5><span id="2-3-4-shu"><strong>2-3-4æ ‘</strong></span><a href="#2-3-4-shu" class="header-anchor">#</a></h5><p>2-3-4æ ‘æ˜¯4é˜¶Bæ ‘ï¼Œ<a target="_blank" rel="noopener" href="https://www.cnblogs.com/sfencs-hcy/p/10363259.html"><strong>2-3-4æ ‘æ’å…¥ä¸åˆ é™¤</strong></a></p>
<h5><span id="treap-shu">treapæ ‘</span><a href="#treap-shu" class="header-anchor">#</a></h5><p>æ‰€è°“çš„Treapæ ‘å †å…¶å®å°±æ˜¯æ ‘ + å †ã€‚æ ‘æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘BSTï¼Œå †æ˜¯äºŒå‰å †ï¼Œå¤§æ ¹å †å°æ ¹å †éƒ½å¯ä»¥ã€‚</p>
<p>æ ‘å †æ—¢æ˜¯ä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªäºŒå‰å †ã€‚ä½†æ˜¯è¿™ä¸¤ç§æ•°æ®ç»“æ„è²Œä¼¼è¿˜æ˜¯çŸ›ç›¾çš„å­˜åœ¨ï¼Œå¦‚æœæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå°±ä¸èƒ½æ˜¯ä¸€ä¸ªå †ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå †ï¼Œé‚£ä¹ˆå¿…ç„¶ä¸æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ã€‚</p>
<p>æ‰€ä»¥æ ‘å †ç”¨äº†ä¸€ä¸ªå¾ˆå·§å¦™çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼š<strong>ç»™æ¯ä¸ªé”®å€¼ä¸€ä¸ªéšæœºé™„åŠ çš„ä¼˜å…ˆçº§</strong>ï¼Œè®©é”®å€¼æ»¡è¶³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç»“æ„ï¼Œè®©ä¼˜å…ˆçº§æ»¡è¶³äºŒå‰å †çš„ç»“æ„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fusiwei/p/12884254.html"><strong>treapæ ‘çš„è¯¦è§£ï¼Œæ’å…¥ä¸åˆ é™¤</strong></a></p>
<h5><span id="k-d-shu"><strong>k-dæ ‘</strong></span><a href="#k-d-shu" class="header-anchor">#</a></h5><p><strong>k-dæ ‘</strong>å¸¸ç”¨æ¥ä½œç©ºé—´åˆ’åˆ†åŠè¿‘é‚»æœç´¢ï¼Œæ˜¯äºŒå‰ç©ºé—´åˆ’åˆ†æ ‘çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/flyinggod/p/8727584.html">K-D TREEç®—æ³•åŸç†åŠå®ç°</a></p>
<h5><span id="zui-xiao-sheng-cheng-shu-minimum-spanning-tree">æœ€å°ç”Ÿæˆæ ‘(Minimum Spanning Tree)</span><a href="#zui-xiao-sheng-cheng-shu-minimum-spanning-tree" class="header-anchor">#</a></h5><p>å¯¹äºæœ‰nä¸ªé¡¶ç‚¹çš„è¿é€šå›¾ï¼Œç”Ÿæˆæ ‘æœ‰n-1æ¡è¾¹ï¼Œè‹¥è¾¹æ•°å°äºæ­¤æ•°å°±ä¸å¯èƒ½å°†å„é¡¶ç‚¹è¿é€šï¼Œå¦‚æœè¾¹çš„æ•°é‡å¤šäºn-1æ¡è¾¹ï¼Œå¿…å®šä¼šäº§ç”Ÿå›è·¯ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dengfaheng/p/9245794.html">æœ€å°ç”Ÿæˆæ ‘(Minimum Spanning Treeç†è§£</a></p>
<h4><span id="6-dui-he-you-xian-dui-lie">6.å †å’Œä¼˜å…ˆé˜Ÿåˆ—</span><a href="#6-dui-he-you-xian-dui-lie" class="header-anchor">#</a></h4><p>åœ¨è®¸å¤šé—®é¢˜ä¸­ï¼Œå½“å¯¹æ•°æ®é›†è¿›è¡Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œæ—¶ï¼Œå¾€å¾€éœ€è¦å¿«é€Ÿç¡®å®šæœ€å¤§æˆ–æœ€å°çš„å…ƒç´ ã€‚å¤„ç†è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå·²æ’å¥½åºçš„æ•°æ®é›†ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæœ€å¤§æˆ–æœ€å°çš„å…ƒç´ æ€»æ˜¯å¤„åœ¨æ•°æ®é›†çš„å¤´éƒ¨ï¼ˆè¿™å–å†³äºä½¿ç”¨å‡åºè¿˜æ˜¯é™åºæ’åˆ—ï¼‰ã€‚ç„¶è€Œå°†æ•°æ®é›†ä¸€éåˆä¸€éåœ°è¿›è¡Œæ’åºçš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚å¹¶ä¸”è®¸å¤šæƒ…å†µä¸‹ï¼Œå°†å…ƒç´ æ’åºå¹¶ä¸æ˜¯è¶…è¶Šçš„ç›®çš„ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯èƒ½åœ¨çœŸæ­£è¦åšçš„å·¥ä½œä¹‹å¤–åšäº†å¾ˆå¤šå…¶ä»–å·¥ä½œï¼Œæƒ³è¦å¿«é€Ÿçš„æ‰¾åˆ°æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ ï¼Œåªéœ€è¦è®©å…ƒç´ å‚¨å­˜åœ¨å¯ä»¥æ‰¾åˆ°å®ƒçš„ä½ç½®ä¸Šå°±è¡Œã€‚å †å’Œä¼˜å…ˆé˜Ÿåˆ—ï¼Œå°±æ˜¯ä¸€ç§å¤„ç†è¿™ç§é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<p>æœ¬ç« å†…å®¹åŒ…æ‹¬ï¼š</p>
<h5><span id="dui"><strong>å †</strong>ï¼š</span><a href="#dui" class="header-anchor">#</a></h5><blockquote>
<p>å®ƒæ˜¯ä¸€ç§æ ‘å½¢ç»„ç»‡ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè¿…é€Ÿç¡®å®šåŒ…å«æœ€å¤§å€¼çš„ç»“ç‚¹ã€‚ç»´æŒä¸€æ£µæ ‘çš„ä»£ä»·ä½äºç»´æŒä¸€ä¸ªæœ‰åºæ•°æ®é›†ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šé€šè¿‡å †å¿«é€Ÿåœ°æ‰¾åˆ°åŒ…å«æœ€å°å€¼çš„å…ƒç´ ã€‚</p>
</blockquote>
<h5><span id="you-xian-dui-lie"><strong>ä¼˜å…ˆé˜Ÿåˆ—</strong></span><a href="#you-xian-dui-lie" class="header-anchor">#</a></h5><blockquote>
<p>å®ƒæ˜¯ä¸€ä¸ªä»å †è‡ªç„¶è¡ç”Ÿè€Œæ¥çš„æ•°æ®ç»“æ„ã€‚åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªå †ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿè¿…é€Ÿç¡®å®šä¸‹ä¸€ä¸ªæœ€é«˜ä¼˜å…ˆçº§çš„ç»“ç‚¹ã€‚æ‰€è°“å…ƒç´ çš„â€œä¼˜å…ˆçº§â€åœ¨ä¸åŒçš„é—®é¢˜ä¸­æœ‰ä¸åŒçš„æ„ä¹‰ã€‚</p>
</blockquote>
<p>é˜Ÿå’Œä¼˜å…ˆé˜Ÿåˆ—çš„ä¸€äº›åº”ç”¨ï¼š</p>
<h5><span id="pai-xu-dui-pai-xu">æ’åºï¼šå †æ’åº</span><a href="#pai-xu-dui-pai-xu" class="header-anchor">#</a></h5><h5><span id="ren-wu-diao-du">ä»»åŠ¡è°ƒåº¦</span><a href="#ren-wu-diao-du" class="header-anchor">#</a></h5><blockquote>
<p>ä»»åŠ¡è°ƒåº¦ä¼šå‘Šè¯‰æ“ä½œç³»ç»Ÿæ¥ä¸‹æ¥å“ªä¸ªè¿›ç¨‹å°†åœ¨CPUä¸Šè¿è¡Œã€‚æ“ä½œç³»ç»Ÿä¼šä¸æ–­è°ƒæ•´è¿› ç¨‹çš„ä¼˜å…ˆçº§ï¼Œç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥å­˜å‚¨è¿›ç¨‹æ˜¯ç›¸å¯¹æ¯”è¾ƒé«˜æ•ˆçš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¡®ä¿ä¸‹ä¸€ ä¸ªå°†åœ¨CPUä¸­è¿è¡Œçš„è¿›ç¨‹çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ã€‚</p>
</blockquote>
<h5><span id="bao-qian-fen-jian-jian-ben-zhang-xiang-guan-zhang-jie">åŒ…è¤°åˆ†æ‹£ï¼ˆè§æœ¬ç« ç›¸å…³ç« èŠ‚ï¼‰</span><a href="#bao-qian-fen-jian-jian-ben-zhang-xiang-guan-zhang-jie" class="header-anchor">#</a></h5><blockquote>
<p>å¿«é€’å…¬å¸é€šå¸¸ç”¨åŒ…è£¹åˆ†æ‹£æ³•æ¥ç¡®å®šåŒ…è£¹é€’é€çš„ä¼˜å…ˆçº§ã€‚å½“æ‰«æåŒ…è£¹æ—¶ï¼Œé«˜ä¼˜å…ˆçº§çš„ åŒ…è£¹å°†ä½œä¸ºæ€¥å¿«ä»¶æŠ•é€’å‡ºå»ã€‚è€Œéæ€¥å¿«ä»¶å°†ä½œä¸ºè¾ƒä½ä¼˜å…ˆçº§çš„åŒ…è£¹æŠ•é€’å‡ºå»ã€‚è®¡ç®— æœºç³»ç»Ÿé€šå¸¸ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥ä¿è¯æœ€é«˜ä¼˜å…ˆçº§çš„åŒ…åœ¨ç³»ç»Ÿä¸­è¿è¡Œæœ€é¡ºç•…ï¼Œå› ä¸ºè¿™ç§æ–¹ æ³•ååˆ†é«˜æ•ˆã€‚</p>
</blockquote>
<h5><span id="huo-fu-man-bian-ma">éœå¤«æ›¼ç¼–ç </span><a href="#huo-fu-man-bian-ma" class="header-anchor">#</a></h5><blockquote>
<p>è¿™æ˜¯ä¸€ç§æ•°æ®å‹ç¼©æ–¹æ³•ï¼Œå®ƒä½¿ç”¨éœå¤«æ›¼æ ‘ä¸ºæ•°æ®ç¬¦å·åˆ†é…ç¼–ç ï¼ˆè§ç¬¬14ç« ï¼‰ã€‚å‘å‡º ç°é¢‘ç‡è¾ƒé«˜çš„ç¬¦å·åˆ†é…è¾ƒçŸ­çš„ç¼–ç ,å‘å‡ºç°é¢‘ç‡è¾ƒä½çš„ç¬¦å·åˆ†é…è¾ƒé•¿çš„ç¼–ç ã€‚éœå¤« æ›¼æ ‘æ˜¯ç”±è¾ƒå°çš„äºŒå‰æ ‘ä¸¤ä¸¤åˆå¹¶æ„æˆã€‚ç”±äºæ¯æ¬¡éƒ½å¿…é¡»åˆå¹¶é”®å€¼æœ€å°çš„äºŒå‰æ ‘ï¼Œå›  æ­¤æ¯æ¬¡åˆå¹¶çš„ä¸¤æ£µæ ‘éƒ½æ˜¯ä»ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸­å–å‡ºçš„ã€‚</p>
</blockquote>
<h5><span id="fu-zai-jun-heng">è´Ÿè½½å‡è¡¡</span><a href="#fu-zai-jun-heng" class="header-anchor">#</a></h5><blockquote>
<p>å®ƒç”¨æ¥ç»´æŠ¤ç®¡ç†ä¸€ç³»åˆ—å¤„ç†ç±»ä¼¼ä»»åŠ¡çš„æœåŠ¡ã€‚å½“è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥ç¡®å®šå“ª ä¸ªæœåŠ¡å™¨èƒ½å¤Ÿæœ€å¥½åœ°å¤„ç†åˆ°è¾¾çš„ä»»åŠ¡ã€‚</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://gitee.com/txt1994/images/raw/master/img/Heap_tree/heap.svg">å †æ’åº</a></p>
<p><img src="https://gitee.com/txt1994/images/raw/master/img/Heap_tree/heap.svg" srcset="/img/loading.gif" lazyload></p>
<p><strong>ä¼˜å…ˆé˜Ÿåˆ—çš„æè¿°:</strong></p>
<p>   ä¼˜å…ˆé˜Ÿåˆ—å°†æ•°æ®æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºæ’åˆ—ã€‚ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ç”±è®¸å¤šæœ‰åºçš„å…ƒç´ æ„æˆï¼Œæ‰€ä»¥ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ å¯ä»¥æœ‰æ•ˆè€Œå¿«é€Ÿåœ°ç¡®å®š,ä¾‹å¦‚ï¼Œæˆ‘ä»¬çœ‹ä¸€ç»„ç”¨æ¥åšè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨ï¼Œæ—¶æ—¶è§‚å¯Ÿå®ƒä»¬çš„ä½¿ç”¨æƒ…å†µã€‚å½“è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥å‘ŠçŸ¥å½“å‰å“ªä¸ªæœåŠ¡å™¨æ˜¯å¤„ç† æ­¤è¿æ¥è¯·æ±‚çš„æœ€ä½³æœåŠ¡å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€ç©ºé—²çš„æœåŠ¡å™¨è·å–çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› ä¸ºå®ƒ å¯ä»¥æœ€å¥½åœ°å¤„ç†æœåŠ¡è¯·æ±‚ã€‚</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/data-structures/">data-structures</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/03/C-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">C++è®¾è®¡æ¨¡å¼-ç»“æ„å‹æ¨¡å¼</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/01/01/%E7%AE%97%E6%B3%95/">
                        <span class="hidden-mobile">ç®—æ³•</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="lv-container" data-id="city" data-uid="MTAyMC81NTMzMi8zMTc5OQ==">
    <script type="text/javascript">
      Fluid.utils.loadComments('#lv-container', function() {
        Fluid.utils.createScript('https://cdn-city.livere.com/js/embed.dist.js');
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
